# Python SDK Pylint Guide

Cheat sheet for pylint general guidelines in the Python client SDK library. 

## Table of contents
  - [General Guidance](#general-guidance)
  - [What is Pylint?](#what-is-pylint)
  - [How to run Pylint?](#how-to-run-pylint)
  - [Ignoring Pylint Checkers](#ignore-pylint-checkers)
  - [Updating Pylint Checker Plugin Steps](#updating-pylint-checker-plugin-steps)
  - [Next Pylint](#next-pylint)
  - [Updating Pylint](#updating-pylint)


## General Guidance 

#### What is pylint?

Pylint is a set of (mostly) [astroid](https://pylint.pycqa.org/projects/astroid/en/latest/index.html) based checkers that run static analysis on your code and check that your formatting aligns with Python's style guide (i.e [PEPs](https://peps.python.org/)). 

In the Azure SDK for Python repository, in addition to the standard pylint library, we added custom checkers that help to align our libraries with the [Azure SDK for Python Guidelines](https://guidelinescollab.github.io/azure-sdk/python_introduction.html).

#### How to run Pylint?

One way to run pylint is to run it at the package level with tox:

    .../azure-sdk-for-python/sdk/eventgrid/azure-eventgrid>tox -e pylint -c ../../../eng/tox/tox.ini

If you don't want to use tox you can also install and run pylint on its own:

 - If taking this approach, in order to run with the pylintrc formatting and the custom pylint checkers you must also install the custom checkers and `SET` the pylintrc path. 

- More info on how to run the custom pylint checkers [here](https://github.com/Azure/azure-sdk-tools/blob/main/tools/pylint-extensions/pylint-guidelines-checker/README.md)

        pip install pylint
        pip install pylint-guidelines-checker --index-url="https://pkgs.dev.azure.com/azure-sdk/public/_packaging/azure-sdk-for-python/pypi/simple/"

        .../azure-sdk-for-python>SET PYLINTRC="./pylintrc"
        .../azure-sdk-for-python>pylint ./sdk/eventgrid/azure-eventgrid

    Note that you may see different errors if running a different version of pylint than the one in CI.


## Ignoring Pylint Checkers

<!-- how and when to ignore pylint checkers, status for ignoring really bad custom checkers versus specific ones add to pylintrc file -->
There are three ways to ignore pylint checkers:
- If there is a pylint checker within your SDK that you do not think applies, or that you wish to ignore for that specific scenario (i.e protected-access) you can locally ignore on either the specific line of the warning with a comment `# pylint:disable=protected-access`, or if it appears multiple times within a file you can ignore all related warnings in that file by putting the disable comment at the top of the file.
- Another way to disable a pylint checker is by putting in under the `disable` list in the `pylintrc` file. This should only happen if the checker is giving too many false positives, or is not applicable to our general library. Any additions to the pylintrc file should be discussed beforehand. 
- (Not Recommended) The last way to disable a checker is by ignoring the entire package in the [environment_exclusions.py](https://github.com/Azure/azure-sdk-for-python/blob/main/tools/azure-sdk-tools/ci_tools/environment_exclusions.py) or as a temporary fix ignoring parts of the package via the pylintrc `ignore-paths` option. 
        

### Updating Pylint Checker Plugin Steps

Info on the custom pylint checkers [here](https://github.com/Azure/azure-sdk-tools/blob/main/tools/pylint-extensions/pylint-guidelines-checker)

The custom pylint checkers in addition to being a part of the CI pipeline are also integrated into ApiView and will show as warnings there. 

### Next Pylint

There is now a new step on the CI pipeline called `Run Pylint Next`. This is merely a duplicate of the `Run Pylint` step with the exception that `Run Pylint Next` has the newer version of pylint and the newer version of the custom pylint checkers. 

This next-pylint env can also be run locally through tox:

    tox -e next-pylint -c ../../../eng/tox/tox.ini

The errors generated by the `Run Pylint Next` step will not break your pipelines, but still you should take note and fix them when you have the time. 

## Updating Pylint
Every other month after release week, provided there have been meaningful pylint updates, `Run Pylint Next` will become `Run Pylint` and the version of pylint will be bumped (i.e new checkers added), if you have not fixed the pylint errors in `Run Pylint Next` your CI pipeline will start to fail. You will be notified in advance of the change taking place when you are informed of the release dates. 