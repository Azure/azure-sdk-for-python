interactions:
- request:
    body: null
    headers:
      Accept: [application/json]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [azsdk-python-keyvault-certificates/4.0.0b1 Python/3.6.6 (Windows-10-10.0.18362-SP0)]
    method: POST
    uri: https://vault4ca615b0.vault.azure.net/certificates/mergeCertificate/create?api-version=7.0
  response:
    body: {string: '{"error":{"code":"Unauthorized","message":"Request is missing
        a Bearer or PoP token."}}'}
    headers: {cache-control: no-cache, content-length: '87', content-type: application/json;
        charset=utf-8, date: 'Thu, 29 Aug 2019 01:43:00 GMT', expires: '-1', pragma: no-cache,
      server: Microsoft-IIS/10.0, strict-transport-security: max-age=31536000;includeSubDomains,
      www-authenticate: 'Bearer authorization="https://login.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47",
        resource="https://vault.azure.net"', x-aspnet-version: 4.0.30319, x-content-type-options: nosniff,
      x-ms-keyvault-network-info: addr=131.107.160.72;act_addr_fam=InterNetwork;,
      x-ms-keyvault-region: westus, x-ms-keyvault-service-version: 1.1.0.876, x-powered-by: ASP.NET}
    status: {code: 401, message: Unauthorized}
    url: !!python/object/new:yarl.URL
      state: !!python/tuple
      - !!python/object/new:urllib.parse.SplitResult [https, vault4ca615b0.vault.azure.net,
        /certificates/mergeCertificate/create, api-version=7.0, '']
- request:
    body: '{"policy": {"x509_props": {"subject": "CN=MyCert", "sans": {}}, "issuer":
      {"name": "Unknown", "cert_transparency": false}}}'
    headers:
      Accept: [application/json]
      Content-Length: ['123']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [azsdk-python-keyvault-certificates/4.0.0b1 Python/3.6.6 (Windows-10-10.0.18362-SP0)]
    method: POST
    uri: https://vault4ca615b0.vault.azure.net/certificates/mergeCertificate/create?api-version=7.0
  response:
    body: {string: '{"id":"https://vault4ca615b0.vault.azure.net/certificates/mergeCertificate/pending","issuer":{"name":"Unknown"},"csr":"MIICoTCCAYkCAQAwETEPMA0GA1UEAxMGTXlDZXJ0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAthz70YahzHIinXCqmFVE0nLkn1hAoHF2FwjXXSPbEFeA3k6OqG/SDfMiC3pX3Ued0WtDYhTdqtd6qVdGa79nVkw0KrofKO8hr02p82Zp4z12rnwSwqsoVvtPry+CDdIe9n5CbE6WJdULk9DBF56nDKeA+vUYil1JWwGcPeUDolr6EtsgtPQt56OpKIZnQ1hfnJdxNXT7OK+TfJw4f6xSvUmhiGsXwofiZX7Eif/gSDpa2skfDEd5R2jApdYsns3iWjcXA50057QdHn0qnzFYHdSHAFgva2eZdSILQxuMVZ5Xv14U3LVC31vKkBPMSVBbL4mj6rB743ocCiv5QHUWwQIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAJOLHMeNDeuLEnJ6Y1qkP4mmZrPzIzDgmEvD/LkcSemgUrubcYR+ccskHUsyy+vyxFR4H3ZR+1NAyjQBTStuEjdY13SUWjRm+YkEA7NTVnM/rncoLkDXzAzceL3/VE0xa0ODTlEXZCoxkA74R7RLQgirn/kzrm7YEab+R2HQr8+888xpSNiH49qPdGgvRniPvPs5r81b8j9JMpEjhmb8l4vwBbZkRcthwRpJXee8hZPO+If8btvGDaa+dCvwdPPs4Xtyqrnerdd2iFL5JZQSAuytWNtEwROxmHaR9kUGZLuAHeIYg2k/PLEmcbh5W6j5UmPV4JiB3cZ+z8uchPj2MdY=","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Please Perform Merge to complete the request.","request_id":"bf6ac5749fd64ace8b3a93001a5ded4d"}'}
    headers:
      cache-control: no-cache
      content-length: '1220'
      content-type: application/json; charset=utf-8
      date: Thu, 29 Aug 2019 01:43:02 GMT
      expires: '-1'
      location: [h, t, t, p, s, ':', /, /, v, a, u, l, t, '4', c, a, '6', '1', '5',
        b, '0', ., v, a, u, l, t, ., a, z, u, r, e, ., n, e, t, /, c, e, r, t, i,
        f, i, c, a, t, e, s, /, m, e, r, g, e, C, e, r, t, i, f, i, c, a, t, e, /,
        p, e, n, d, i, n, g, '?', a, p, i, '-', v, e, r, s, i, o, n, '=', '7', .,
        '0', '&', r, e, q, u, e, s, t, _, i, d, '=', b, f, '6', a, c, '5', '7', '4',
        '9', f, d, '6', '4', a, c, e, '8', b, '3', a, '9', '3', '0', '0', '1', a,
        '5', d, e, d, '4', d]
      pragma: no-cache
      retry-after: '10'
      server: Microsoft-IIS/10.0
      strict-transport-security: max-age=31536000;includeSubDomains
      x-aspnet-version: 4.0.30319
      x-content-type-options: nosniff
      x-ms-keyvault-network-info: addr=131.107.160.72;act_addr_fam=InterNetwork;
      x-ms-keyvault-region: westus
      x-ms-keyvault-service-version: 1.1.0.876
      x-powered-by: ASP.NET
    status: {code: 202, message: Accepted}
    url: !!python/object/new:yarl.URL
      state: !!python/tuple
      - !!python/object/new:urllib.parse.SplitResult [https, vault4ca615b0.vault.azure.net,
        /certificates/mergeCertificate/create, api-version=7.0, '']
- request:
    body: '{"x5c": ["TUlJQ3lqQ0NBYklDQVFFd0RRWUpLb1pJaHZjTkFRRUxCUUF3UlRFTE1Ba0dBMVVFQmhNQ1FWVXhFekFSQmdOVkJBZ01DbE52YldVdFUzUmhkR1V4SVRBZkJnTlZCQW9NR0VsdWRHVnlibVYwSUZkcFpHZHBkSE1nVUhSNUlFeDBaREFlRncweE9UQTRNamt3TVRRek1ESmFGdzB4T1RBNE1qa3dNVFEwTURKYU1CRXhEekFOQmdOVkJBTVRCazE1UTJWeWREQ0NBU0l3RFFZSktvWklodmNOQVFFQkJRQURnZ0VQQURDQ0FRb0NnZ0VCQUxZYys5R0dvY3h5SXAxd3FwaFZSTkp5NUo5WVFLQnhkaGNJMTEwajJ4QlhnTjVPanFodjBnM3pJZ3Q2VjkxSG5kRnJRMklVM2FyWGVxbFhSbXUvWjFaTU5DcTZIeWp2SWE5TnFmTm1hZU05ZHE1OEVzS3JLRmI3VDY4dmdnM1NIdlorUW14T2xpWFZDNVBRd1JlZXB3eW5nUHIxR0lwZFNWc0JuRDNsQTZKYStoTGJJTFQwTGVlanFTaUdaME5ZWDV5WGNUVjAreml2azN5Y09IK3NVcjFKb1lockY4S0g0bVYreEluLzRFZzZXdHJKSHd4SGVVZG93S1hXTEo3TjRsbzNGd09kTk9lMEhSNTlLcDh4V0IzVWh3QllMMnRubVhVaUMwTWJqRldlVjc5ZUZOeTFRdDlieXBBVHpFbFFXeStKbytxd2UrTjZIQW9yK1VCMUZzRUNBd0VBQVRBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQWQ5VVZnOWYvOE5LWEhlZE5oeS8xUVRYY2VEbzRFWUtLOHgyVE15QzVYR1NHdXFpY3pvNDhBV3dBNzVWUDFPWU0xRm1Db1IzQkNiaTVuYW1lNHhTQUZGMVJiOGw1L3NLWFREcTFWSWdDVnorTGh2UzJDZ016Mlg5N1V3ZzY2MHpnRjdLTE5sZmhIWDdrZWc1ZGxJbEJoZWUxcXg0MnFDM3pObzczY1BtemdIU2RNNEtqVHg0SjNTb2pvYzZSS2YzaDE5SnRIcFY5MHJvcE1KRDNIUXBVdVBrSUIzbVVja0QxeEhiUEFLVG9lUWFLOEMwOS94U0lHQzBXVEtscDZEaGorRzFIS2FiNk9wbEdDMXZZZFdBTkdZNTBwV3NRVUt0ck1Tdk5nazdRczZnVHdyV1hENkI2LzVPSDRHMWYvYmp1T1VmbDhsZ3hhTmd5U2x3MmZEakRpUT09"]}'
    headers:
      Accept: [application/json]
      Content-Length: ['1293']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [azsdk-python-keyvault-certificates/4.0.0b1 Python/3.6.6 (Windows-10-10.0.18362-SP0)]
    method: POST
    uri: https://vault4ca615b0.vault.azure.net/certificates/mergeCertificate/pending/merge?api-version=7.0
  response:
    body: {string: '{"id":"https://vault4ca615b0.vault.azure.net/certificates/mergeCertificate/5075fbc40e884f90b30933e991d584e4","kid":"https://vault4ca615b0.vault.azure.net/keys/mergeCertificate/5075fbc40e884f90b30933e991d584e4","sid":"https://vault4ca615b0.vault.azure.net/secrets/mergeCertificate/5075fbc40e884f90b30933e991d584e4","x5t":"fxGparC3FBdos5RzhA_7OxtJ9VU","cer":"MIICyjCCAbICAQEwDQYJKoZIhvcNAQELBQAwRTELMAkGA1UEBhMCQVUxEzARBgNVBAgMClNvbWUtU3RhdGUxITAfBgNVBAoMGEludGVybmV0IFdpZGdpdHMgUHR5IEx0ZDAeFw0xOTA4MjkwMTQzMDJaFw0xOTA4MjkwMTQ0MDJaMBExDzANBgNVBAMTBk15Q2VydDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALYc+9GGocxyIp1wqphVRNJy5J9YQKBxdhcI110j2xBXgN5Ojqhv0g3zIgt6V91HndFrQ2IU3arXeqlXRmu/Z1ZMNCq6HyjvIa9NqfNmaeM9dq58EsKrKFb7T68vgg3SHvZ+QmxOliXVC5PQwReepwyngPr1GIpdSVsBnD3lA6Ja+hLbILT0LeejqSiGZ0NYX5yXcTV0+zivk3ycOH+sUr1JoYhrF8KH4mV+xIn/4Eg6WtrJHwxHeUdowKXWLJ7N4lo3FwOdNOe0HR59Kp8xWB3UhwBYL2tnmXUiC0MbjFWeV79eFNy1Qt9bypATzElQWy+Jo+qwe+N6HAor+UB1FsECAwEAATANBgkqhkiG9w0BAQsFAAOCAQEAd9UVg9f/8NKXHedNhy/1QTXceDo4EYKK8x2TMyC5XGSGuqiczo48AWwA75VP1OYM1FmCoR3BCbi5name4xSAFF1Rb8l5/sKXTDq1VIgCVz+LhvS2CgMz2X97Uwg660zgF7KLNlfhHX7keg5dlIlBhee1qx42qC3zNo73cPmzgHSdM4KjTx4J3Sojoc6RKf3h19JtHpV90ropMJD3HQpUuPkIB3mUckD1xHbPAKToeQaK8C09/xSIGC0WTKlp6Dhj+G1HKab6OplGC1vYdWANGY50pWsQUKtrMSvNgk7Qs6gTwrWXD6B6/5OH4G1f/bjuOUfl8lgxaNgySlw2fDjDiQ==","attributes":{"enabled":true,"nbf":1567042982,"exp":1567043042,"created":1567042983,"updated":1567042983,"recoveryLevel":"Purgeable"},"policy":{"id":"https://vault4ca615b0.vault.azure.net/certificates/mergeCertificate/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":false},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=MyCert","sans":{},"ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["digitalSignature","keyEncipherment"],"validity_months":12,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"lifetime_percentage":80},"action":{"action_type":"EmailContacts"}}],"issuer":{"name":"Unknown","cert_transparency":false},"attributes":{"enabled":true,"created":1567042982,"updated":1567042982}},"pending":{"id":"https://vault4ca615b0.vault.azure.net/certificates/mergeCertificate/pending"}}'}
    headers:
      cache-control: no-cache
      content-length: '2201'
      content-type: application/json; charset=utf-8
      date: Thu, 29 Aug 2019 01:43:03 GMT
      expires: '-1'
      location: [h, t, t, p, s, ':', /, /, v, a, u, l, t, '4', c, a, '6', '1', '5',
        b, '0', ., v, a, u, l, t, ., a, z, u, r, e, ., n, e, t, /, c, e, r, t, i,
        f, i, c, a, t, e, s, /, m, e, r, g, e, C, e, r, t, i, f, i, c, a, t, e, '?',
        a, p, i, '-', v, e, r, s, i, o, n, '=', '7', ., '0']
      pragma: no-cache
      server: Microsoft-IIS/10.0
      strict-transport-security: max-age=31536000;includeSubDomains
      x-aspnet-version: 4.0.30319
      x-content-type-options: nosniff
      x-ms-keyvault-network-info: addr=131.107.160.72;act_addr_fam=InterNetwork;
      x-ms-keyvault-region: westus
      x-ms-keyvault-service-version: 1.1.0.876
      x-powered-by: ASP.NET
    status: {code: 201, message: Created}
    url: !!python/object/new:yarl.URL
      state: !!python/tuple
      - !!python/object/new:urllib.parse.SplitResult [https, vault4ca615b0.vault.azure.net,
        /certificates/mergeCertificate/pending/merge, api-version=7.0, '']
version: 1
