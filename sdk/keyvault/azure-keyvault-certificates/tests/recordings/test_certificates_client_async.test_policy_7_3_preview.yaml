interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Content-Length:
      - '0'
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-keyvault-certificates/4.4.0b1 Python/3.9.0 (Windows-10-10.0.19041-SP0)
    method: POST
    uri: https://vaultname.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/create?api-version=7.3-preview
  response:
    body:
      string: '{"error":{"code":"Unauthorized","message":"AKV10000: Request is missing
        a Bearer or PoP token."}}'
    headers:
      cache-control: no-cache
      content-length: '97'
      content-type: application/json; charset=utf-8
      date: Mon, 30 Aug 2021 23:55:15 GMT
      expires: '-1'
      pragma: no-cache
      strict-transport-security: max-age=31536000;includeSubDomains
      www-authenticate: Bearer authorization="https://login.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47",
        resource="https://vault.azure.net"
      x-content-type-options: nosniff
      x-ms-keyvault-network-info: conn_type=Ipv4;addr=172.92.159.124;act_addr_fam=InterNetwork;
      x-ms-keyvault-region: westus
      x-ms-keyvault-service-version: 1.9.79.1
      x-powered-by: ASP.NET
    status:
      code: 401
      message: Unauthorized
    url: https://mcpatino-kv.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/create?api-version=7.3-preview
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=DefaultPolicy", "ekus": ["1.3.6.1.5.5.7.3.1",
      "1.3.6.1.5.5.7.3.2"], "sans": {"dns_names": ["sdk.azure-int.net"]}, "key_usage":
      ["decipherOnly"], "validity_months": 12}, "lifetime_actions": [{"trigger": {"lifetime_percentage":
      98}, "action": {"action_type": "EmailContacts"}}], "issuer": {"name": "Self",
      "cert_transparency": false}}}'
    headers:
      Accept:
      - application/json
      Content-Length:
      - '518'
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-keyvault-certificates/4.4.0b1 Python/3.9.0 (Windows-10-10.0.19041-SP0)
    method: POST
    uri: https://vaultname.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/create?api-version=7.3-preview
  response:
    body:
      string: '{"id":"https://vaultname.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/pending","issuer":{"name":"Self"},"csr":"MIICxzCCAa8CAQAwGDEWMBQGA1UEAxMNRGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALi+O36GiRcrQj3jtDaQdy6pMlrycjfPRGruxWg6ujZxEnevvDweK7u+GiiUQW76sTGgKq6fdXrQ8yqjQAg7IuM6d4UGRRanSrM62CBE/j3ZN/vy0ZZTYKZyFa6Gni99BMDBDDy48sTH/PtCQXaE8FotrU45WkzbBzLYRf4ITHZ9MsWqAJinE8uVujzRfIsGUAMp+MSvRkKgkynYH3mpEiUDbw4oqDtcGyGoWLJi9A9CP330utr3fnAivk4X6R/niDZrxJ+DRaU7CR/MLhbP4lObdKmmmcwarNrtufrHlecWNdE6UIWj0ExMWkvhkPiSW44p+0g0RD/Z7d4SlcuYLbECAwEAAaBqMGgGCSqGSIb3DQEJDjFbMFkwDwYDVR0PAQH/BAUDAwcAgDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwHAYDVR0RBBUwE4IRc2RrLmF6dXJlLWludC5uZXQwCQYDVR0TBAIwADANBgkqhkiG9w0BAQsFAAOCAQEAGICQ9HqejORAXCPBwcVd8eyh6MSa1u6FpbClF3wS6x6BcZYcDozotPsin+LN7IZZd66PmgIJV0hTQ0dAX5I/q3kMsT46+uXsXK44LuUJUkvnRvINN5Jq8LjsFg1eQlMMWfLgEZ51lnvbMbU+NaV5MzxLFXsCvxamAsaN7DbSa1xCgOmDQdSozXu8aD5NvxYurvbGrzbR7etj/IAT9U17N6hZTU1T/BL5779fqV52pJekeyxNjQ7173BSXpASQDs1DrpgQDVmclRRXkKzQUhqf35Z8YgX1kC3ZoZ2s+74Z+pXiefAonVT1p+pmw+SSs2MFymkK96TjMcKJwxBCthq6g==","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"c385f7651a3a41fe8f28f8f0feef2eef"}'
    headers:
      cache-control: no-cache
      content-length: '1356'
      content-type: application/json; charset=utf-8
      date: Mon, 30 Aug 2021 23:55:16 GMT
      expires: '-1'
      location: https://vaultname.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/pending?api-version=7.3-preview&request_id=c385f7651a3a41fe8f28f8f0feef2eef
      pragma: no-cache
      strict-transport-security: max-age=31536000;includeSubDomains
      x-content-type-options: nosniff
      x-ms-keyvault-network-info: conn_type=Ipv4;addr=172.92.159.124;act_addr_fam=InterNetwork;
      x-ms-keyvault-region: westus
      x-ms-keyvault-service-version: 1.9.79.1
      x-powered-by: ASP.NET
    status:
      code: 202
      message: Accepted
    url: https://mcpatino-kv.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/create?api-version=7.3-preview
- request:
    body: null
    headers:
      Accept:
      - application/json
      User-Agent:
      - azsdk-python-keyvault-certificates/4.4.0b1 Python/3.9.0 (Windows-10-10.0.19041-SP0)
    method: GET
    uri: https://vaultname.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/pending?api-version=7.3-preview
  response:
    body:
      string: '{"id":"https://vaultname.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/pending","issuer":{"name":"Self"},"csr":"MIICxzCCAa8CAQAwGDEWMBQGA1UEAxMNRGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALi+O36GiRcrQj3jtDaQdy6pMlrycjfPRGruxWg6ujZxEnevvDweK7u+GiiUQW76sTGgKq6fdXrQ8yqjQAg7IuM6d4UGRRanSrM62CBE/j3ZN/vy0ZZTYKZyFa6Gni99BMDBDDy48sTH/PtCQXaE8FotrU45WkzbBzLYRf4ITHZ9MsWqAJinE8uVujzRfIsGUAMp+MSvRkKgkynYH3mpEiUDbw4oqDtcGyGoWLJi9A9CP330utr3fnAivk4X6R/niDZrxJ+DRaU7CR/MLhbP4lObdKmmmcwarNrtufrHlecWNdE6UIWj0ExMWkvhkPiSW44p+0g0RD/Z7d4SlcuYLbECAwEAAaBqMGgGCSqGSIb3DQEJDjFbMFkwDwYDVR0PAQH/BAUDAwcAgDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwHAYDVR0RBBUwE4IRc2RrLmF6dXJlLWludC5uZXQwCQYDVR0TBAIwADANBgkqhkiG9w0BAQsFAAOCAQEAGICQ9HqejORAXCPBwcVd8eyh6MSa1u6FpbClF3wS6x6BcZYcDozotPsin+LN7IZZd66PmgIJV0hTQ0dAX5I/q3kMsT46+uXsXK44LuUJUkvnRvINN5Jq8LjsFg1eQlMMWfLgEZ51lnvbMbU+NaV5MzxLFXsCvxamAsaN7DbSa1xCgOmDQdSozXu8aD5NvxYurvbGrzbR7etj/IAT9U17N6hZTU1T/BL5779fqV52pJekeyxNjQ7173BSXpASQDs1DrpgQDVmclRRXkKzQUhqf35Z8YgX1kC3ZoZ2s+74Z+pXiefAonVT1p+pmw+SSs2MFymkK96TjMcKJwxBCthq6g==","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"c385f7651a3a41fe8f28f8f0feef2eef"}'
    headers:
      cache-control: no-cache
      content-length: '1356'
      content-type: application/json; charset=utf-8
      date: Mon, 30 Aug 2021 23:55:16 GMT
      expires: '-1'
      pragma: no-cache
      strict-transport-security: max-age=31536000;includeSubDomains
      x-content-type-options: nosniff
      x-ms-keyvault-network-info: conn_type=Ipv4;addr=172.92.159.124;act_addr_fam=InterNetwork;
      x-ms-keyvault-region: westus
      x-ms-keyvault-service-version: 1.9.79.1
      x-powered-by: ASP.NET
    status:
      code: 200
      message: OK
    url: https://mcpatino-kv.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/pending?api-version=7.3-preview
- request:
    body: null
    headers:
      Accept:
      - application/json
      User-Agent:
      - azsdk-python-keyvault-certificates/4.4.0b1 Python/3.9.0 (Windows-10-10.0.19041-SP0)
    method: GET
    uri: https://vaultname.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/pending?api-version=7.3-preview
  response:
    body:
      string: '{"id":"https://vaultname.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/pending","issuer":{"name":"Self"},"csr":"MIICxzCCAa8CAQAwGDEWMBQGA1UEAxMNRGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALi+O36GiRcrQj3jtDaQdy6pMlrycjfPRGruxWg6ujZxEnevvDweK7u+GiiUQW76sTGgKq6fdXrQ8yqjQAg7IuM6d4UGRRanSrM62CBE/j3ZN/vy0ZZTYKZyFa6Gni99BMDBDDy48sTH/PtCQXaE8FotrU45WkzbBzLYRf4ITHZ9MsWqAJinE8uVujzRfIsGUAMp+MSvRkKgkynYH3mpEiUDbw4oqDtcGyGoWLJi9A9CP330utr3fnAivk4X6R/niDZrxJ+DRaU7CR/MLhbP4lObdKmmmcwarNrtufrHlecWNdE6UIWj0ExMWkvhkPiSW44p+0g0RD/Z7d4SlcuYLbECAwEAAaBqMGgGCSqGSIb3DQEJDjFbMFkwDwYDVR0PAQH/BAUDAwcAgDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwHAYDVR0RBBUwE4IRc2RrLmF6dXJlLWludC5uZXQwCQYDVR0TBAIwADANBgkqhkiG9w0BAQsFAAOCAQEAGICQ9HqejORAXCPBwcVd8eyh6MSa1u6FpbClF3wS6x6BcZYcDozotPsin+LN7IZZd66PmgIJV0hTQ0dAX5I/q3kMsT46+uXsXK44LuUJUkvnRvINN5Jq8LjsFg1eQlMMWfLgEZ51lnvbMbU+NaV5MzxLFXsCvxamAsaN7DbSa1xCgOmDQdSozXu8aD5NvxYurvbGrzbR7etj/IAT9U17N6hZTU1T/BL5779fqV52pJekeyxNjQ7173BSXpASQDs1DrpgQDVmclRRXkKzQUhqf35Z8YgX1kC3ZoZ2s+74Z+pXiefAonVT1p+pmw+SSs2MFymkK96TjMcKJwxBCthq6g==","cancellation_requested":false,"status":"completed","target":"https://vaultname.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7","request_id":"c385f7651a3a41fe8f28f8f0feef2eef"}'
    headers:
      cache-control: no-cache
      content-length: '1287'
      content-type: application/json; charset=utf-8
      date: Mon, 30 Aug 2021 23:55:21 GMT
      expires: '-1'
      pragma: no-cache
      strict-transport-security: max-age=31536000;includeSubDomains
      x-content-type-options: nosniff
      x-ms-keyvault-network-info: conn_type=Ipv4;addr=172.92.159.124;act_addr_fam=InterNetwork;
      x-ms-keyvault-region: westus
      x-ms-keyvault-service-version: 1.9.79.1
      x-powered-by: ASP.NET
    status:
      code: 200
      message: OK
    url: https://mcpatino-kv.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/pending?api-version=7.3-preview
- request:
    body: null
    headers:
      Accept:
      - application/json
      User-Agent:
      - azsdk-python-keyvault-certificates/4.4.0b1 Python/3.9.0 (Windows-10-10.0.19041-SP0)
    method: GET
    uri: https://vaultname.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/?api-version=7.3-preview
  response:
    body:
      string: '{"id":"https://vaultname.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/5f5be483b5c84b5ca114cc9d2d9d5d5c","kid":"https://vaultname.vault.azure.net/keys/livekvtestpolicyCertificate5fd915d7/5f5be483b5c84b5ca114cc9d2d9d5d5c","sid":"https://vaultname.vault.azure.net/secrets/livekvtestpolicyCertificate5fd915d7/5f5be483b5c84b5ca114cc9d2d9d5d5c","x5t":"p4-eTwUOnzVm2hti_kTUatTXPW0","cer":"MIIDVzCCAj+gAwIBAgIQIWEoI3dcTceO5vtyYCdgMTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDEw1EZWZhdWx0UG9saWN5MB4XDTIxMDgzMDIzNDUxN1oXDTIyMDgzMDIzNTUxN1owGDEWMBQGA1UEAxMNRGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALi+O36GiRcrQj3jtDaQdy6pMlrycjfPRGruxWg6ujZxEnevvDweK7u+GiiUQW76sTGgKq6fdXrQ8yqjQAg7IuM6d4UGRRanSrM62CBE/j3ZN/vy0ZZTYKZyFa6Gni99BMDBDDy48sTH/PtCQXaE8FotrU45WkzbBzLYRf4ITHZ9MsWqAJinE8uVujzRfIsGUAMp+MSvRkKgkynYH3mpEiUDbw4oqDtcGyGoWLJi9A9CP330utr3fnAivk4X6R/niDZrxJ+DRaU7CR/MLhbP4lObdKmmmcwarNrtufrHlecWNdE6UIWj0ExMWkvhkPiSW44p+0g0RD/Z7d4SlcuYLbECAwEAAaOBnDCBmTAPBgNVHQ8BAf8EBQMDBwCAMAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMBwGA1UdEQQVMBOCEXNkay5henVyZS1pbnQubmV0MB8GA1UdIwQYMBaAFLG9slLNHtz/mlA51RAd7UHQHzNTMB0GA1UdDgQWBBSxvbJSzR7c/5pQOdUQHe1B0B8zUzANBgkqhkiG9w0BAQsFAAOCAQEAH4GlVZpE+95gKj7hi6DUgbSlYUZPr4bxgu7YxFsm1bWA+b68th9B73ImFN3e9jGX8Uf+ngRxnX/gEfELz94trxs3cA+/6PLYWjWgmH/PX+4NNd2NSNYNKNxRaINecccTLX5CCl3ORG90w2MjlQIvv3Z2MRXqiYBMKPSsWxaT01woCuEipNOWHyynIwIZKNQP77jcHA+NnBdunUoAQnLuUlzMtoDXs49we8Nsnae8bFLwn1DfJeQ3hSW/AjAa9GOcEbLCVYVx5eHmJ0wIdJuxSq4O0TjcXzEDrkP2VpHDrzYyXWzO/ETTaNn4kBU3/N6HmDIOiB0lvIgUygkyuDWAag==","attributes":{"enabled":true,"nbf":1630367117,"exp":1661903717,"created":1630367717,"updated":1630367717,"recoveryLevel":"CustomizedRecoverable+Purgeable","recoverableDays":7},"policy":{"id":"https://vaultname.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=DefaultPolicy","sans":{"dns_names":["sdk.azure-int.net"]},"ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["decipherOnly"],"validity_months":12,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"lifetime_percentage":98},"action":{"action_type":"EmailContacts"}}],"issuer":{"name":"Self","cert_transparency":false},"attributes":{"enabled":true,"created":1630367716,"updated":1630367716}},"pending":{"id":"https://vaultname.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/pending"}}'
    headers:
      cache-control: no-cache
      content-length: '2530'
      content-type: application/json; charset=utf-8
      date: Mon, 30 Aug 2021 23:55:21 GMT
      expires: '-1'
      pragma: no-cache
      strict-transport-security: max-age=31536000;includeSubDomains
      x-content-type-options: nosniff
      x-ms-keyvault-network-info: conn_type=Ipv4;addr=172.92.159.124;act_addr_fam=InterNetwork;
      x-ms-keyvault-region: westus
      x-ms-keyvault-service-version: 1.9.79.1
      x-powered-by: ASP.NET
    status:
      code: 200
      message: OK
    url: https://mcpatino-kv.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/?api-version=7.3-preview
- request:
    body: null
    headers:
      Accept:
      - application/json
      User-Agent:
      - azsdk-python-keyvault-certificates/4.4.0b1 Python/3.9.0 (Windows-10-10.0.19041-SP0)
    method: GET
    uri: https://vaultname.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/policy?api-version=7.3-preview
  response:
    body:
      string: '{"id":"https://vaultname.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=DefaultPolicy","sans":{"dns_names":["sdk.azure-int.net"]},"ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["decipherOnly"],"validity_months":12,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"lifetime_percentage":98},"action":{"action_type":"EmailContacts"}}],"issuer":{"name":"Self","cert_transparency":false},"attributes":{"enabled":true,"created":1630367716,"updated":1630367716}}'
    headers:
      cache-control: no-cache
      content-length: '674'
      content-type: application/json; charset=utf-8
      date: Mon, 30 Aug 2021 23:55:21 GMT
      expires: '-1'
      pragma: no-cache
      strict-transport-security: max-age=31536000;includeSubDomains
      x-content-type-options: nosniff
      x-ms-keyvault-network-info: conn_type=Ipv4;addr=172.92.159.124;act_addr_fam=InterNetwork;
      x-ms-keyvault-region: westus
      x-ms-keyvault-service-version: 1.9.79.1
      x-powered-by: ASP.NET
    status:
      code: 200
      message: OK
    url: https://mcpatino-kv.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/policy?api-version=7.3-preview
- request:
    body: '{"key_props": {"exportable": true, "kty": "EC", "key_size": 256, "reuse_key":
      true, "crv": "P-256"}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=DefaultPolicy", "ekus": ["1.3.6.1.5.5.7.3.1",
      "1.3.6.1.5.5.7.3.2"], "sans": {"dns_names": ["sdk.azure-int.net"]}, "key_usage":
      ["decipherOnly"], "validity_months": 12}, "lifetime_actions": [{"trigger": {"lifetime_percentage":
      98}, "action": {"action_type": "EmailContacts"}}], "issuer": {"name": "Self",
      "cert_transparency": false}}'
    headers:
      Accept:
      - application/json
      Content-Length:
      - '520'
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-keyvault-certificates/4.4.0b1 Python/3.9.0 (Windows-10-10.0.19041-SP0)
    method: PATCH
    uri: https://vaultname.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/policy?api-version=7.3-preview
  response:
    body:
      string: '{"id":"https://vaultname.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/policy","key_props":{"exportable":true,"kty":"EC","key_size":256,"reuse_key":true,"crv":"P-256"},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=DefaultPolicy","sans":{"dns_names":["sdk.azure-int.net"]},"ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["decipherOnly"],"validity_months":12,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"lifetime_percentage":98},"action":{"action_type":"EmailContacts"}}],"issuer":{"name":"Self","cert_transparency":false},"attributes":{"enabled":true,"created":1630367716,"updated":1630367722}}'
    headers:
      cache-control: no-cache
      content-length: '686'
      content-type: application/json; charset=utf-8
      date: Mon, 30 Aug 2021 23:55:22 GMT
      expires: '-1'
      pragma: no-cache
      strict-transport-security: max-age=31536000;includeSubDomains
      x-content-type-options: nosniff
      x-ms-keyvault-network-info: conn_type=Ipv4;addr=172.92.159.124;act_addr_fam=InterNetwork;
      x-ms-keyvault-region: westus
      x-ms-keyvault-service-version: 1.9.79.1
      x-powered-by: ASP.NET
    status:
      code: 200
      message: OK
    url: https://mcpatino-kv.vault.azure.net/certificates/livekvtestpolicyCertificate5fd915d7/policy?api-version=7.3-preview
version: 1
