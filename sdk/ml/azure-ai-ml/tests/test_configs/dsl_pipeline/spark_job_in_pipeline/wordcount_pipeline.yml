type: pipeline

description: 'submit a basic spark hobo job using component sdk'

inputs:
  # input type can be uri_file,uri_folder,mltable
  # mode can be only be direct
  input1:
    type: uri_file
    path: ./dataset/shakespeare.txt
    mode: direct

jobs:
  spark_job:
    type: spark
    component: file:./wordcount_component.yml
    inputs:
      input1: ${{parent.inputs.input1}}

#    resources:
#      instance_type: Standard_E8S_V3
#      runtime_version: 3.1.0
    compute: azureml:spark31

    conf:
      spark.driver.cores: 1
      spark.driver.memory: "2g"
      spark.executor.cores: 2
      spark.executor.memory: "2g"
      spark.executor.instances: 4
      spark.yarn.dist.jars: https://foobaradrama2.azurefd.net/latest/hadoop-azureml-fs.jar
