type: pipeline

display_name: pipeline_with_data_binding
description: The hello world pipeline job with data binding
tags:
  tag: tagvalue
  owner: sdkteam

compute: azureml:cpu-cluster

inputs:
  job_in_number: 1
  job_in_string: "hello"
  job_in_folder:
    path: ../../data
    type: uri_folder
  job_in_file:
    path: ../../data/sample1.csv
    type: uri_file
  target_compute: "cpu-cluster"
  output_file_name: "sample1.csv"

jobs:
  job_input_binding:
    type: command
    component: file:./distribution_component.yml
    inputs:
      component_in_string: ${{parent.inputs.job_in_string}}
      component_in_number: ${{parent.inputs.job_in_number}}
      component_in_folder: ${{parent.inputs.job_in_folder}}
    distribution:
      type: "mpi"
      process_count_per_instance: 1

  node_output_binding:
    type: command
    component: file:./component.yml
    inputs:
      component_in_folder: ${{parent.jobs.job_input_binding.outputs.component_out_folder}}
