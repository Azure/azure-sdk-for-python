name: data-drift-test
trigger:
  type: recurrence
  frequency: week
  time_zone: utc
  interval: 1
  schedule:
    hours:
      - 22
      - 20
    minutes:
      - 0
      - 0
    week_days:
      - monday
      - tuesday
      - wednesday
      - thursday
      - friday
create_monitor:
  compute: azureml:mycompute
  monitoring_target:
    endpoint_deployment_id: fake_endpoint_id
  monitoring_signals:
    testSignal:
      type: data_drift
      target_dataset:
        dataset:
          input_dataset:
            type: mltable
            path: azureml:Direct:1
          dataset_context: test
        lookback_period: 60
      baseline_dataset:
        input_dataset:
          type: mltable
          path: azureml:Direct:1
        dataset_context: test
      metric_thresholds:
        - applicable_feature_type: numerical
          metric_name: jensen_shannon_distance
          threshold: 0.5
        - applicable_feature_type: categorical
          metric_name: pearsons_chi_squared_test
          threshold: 0.2
      data_segment:
        feature_name: foo
        feature_values:
          - a
          - b
          - c
properties:
  prop1: value
tags:
  tag1: tag