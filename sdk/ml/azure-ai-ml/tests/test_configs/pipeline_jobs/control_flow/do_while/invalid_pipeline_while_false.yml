$schema: https://azuremlschemas.azureedge.net/latest/pipelineJob.schema.json

display_name: invalid_pipeline_with_do_while_false
experiment_name: invalid_pipeline_with_do_while_false
type: pipeline

inputs:
  job_in_path:
    type: uri_file
    path: ./pipeline.py
  job_in_number: 3

outputs:
  output_in_number:
    mode: upload
  output_in_path:
    mode: upload

settings:
  default_datastore: azureml:workspaceblobstore
  default_compute: azureml:cpu-cluster
  continue_on_step_failure: false
  force_rerun: true

jobs:
  invalid_condition_body:
    type: pipeline
    inputs:
      job_in_number: ${{parent.inputs.job_in_number}}
      job_in_number_1: ${{parent.inputs.job_in_number}}
      job_in_path: ${{parent.inputs.job_in_path}}
    component: ./components/do_while_body_pipeline_component.yml
  invalid_condition:
    type: do_while
    body: ${{parent.jobs.invalid_condition_body}}
    limits:
      max_iteration_count: 5
    condition: false
    mapping:
      output_in_number:
        - job_in_number
        - job_in_number_1
      output_in_path: job_in_path
