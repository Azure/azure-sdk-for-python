{
  "Entries": [
    {
      "RequestUri": "https://eastus.api.azureml.ms/registrymanagement/v1.0/registries/sdk-test/discovery",
      "RequestMethod": "GET",
      "RequestHeaders": {
        "Accept": "application/json, text/json",
        "Accept-Encoding": "gzip, deflate",
        "Connection": "keep-alive",
        "User-Agent": "azsdk-python-mgmt-machinelearningservices/0.1.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)"
      },
      "RequestBody": null,
      "StatusCode": 200,
      "ResponseHeaders": {
        "Connection": "keep-alive",
        "Content-Encoding": "gzip",
        "Content-Type": "application/json; charset=utf-8",
        "Date": "Fri, 10 Feb 2023 20:07:41 GMT",
        "Request-Context": "appId=cid-v1:2d2e8e63-272e-4b3c-8598-4ee570a0e70d",
        "Strict-Transport-Security": "max-age=15724800; includeSubDomains; preload",
        "Transfer-Encoding": "chunked",
        "Vary": "Accept-Encoding",
        "x-aml-cluster": "vienna-eastus-02",
        "X-Content-Type-Options": "nosniff",
        "x-ms-response-type": "standard",
        "x-request-time": "0.467"
      },
      "ResponseBody": {
        "registryId": "584f9ef8-1989-40a2-9dec-453611954463",
        "registryName": "sdk-test",
        "tenantId": "72f988bf-86f1-41af-91ab-2d7cd011db47",
        "primaryRegion": "eastus2euap",
        "regions": [
          "eastus2euap",
          "eastus"
        ],
        "subscriptionId": "96aede12-2f73-41cb-b983-6d11a904839b",
        "resourceGroup": "sdk",
        "workspaceName": null,
        "primaryRegionResourceProviderUri": "https://cert-eastus2euap.experiments.azureml.net/",
        "registryFqdns": {
          "eastus2euap": {
            "uri": "https://584f9ef8-1989-40a2-9dec-453611954463.registry.eastus2euap.privatelink.api.azureml.ms"
          },
          "eastus": {
            "uri": "https://584f9ef8-1989-40a2-9dec-453611954463.registry.eastus.privatelink.api.azureml.ms"
          }
        }
      }
    },
    {
      "RequestUri": "https://cert-eastus2euap.experiments.azureml.net/mferp/managementfrontend/subscriptions/96aede12-2f73-41cb-b983-6d11a904839b/resourceGroups/sdk/providers/Microsoft.MachineLearningServices/registries/sdk-test/tempdatarefs/000000000000000000000/versions/1?api-version=2021-10-01-dataplanepreview",
      "RequestMethod": "PUT",
      "RequestHeaders": {
        "Accept": "application/json",
        "Accept-Encoding": "gzip, deflate",
        "Connection": "keep-alive",
        "Content-Length": "139",
        "Content-Type": "application/json",
        "User-Agent": "azsdk-python-mgmt-machinelearningservices/0.1.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)"
      },
      "RequestBody": {
        "assetId": "azureml://registries/sdk-test/codes/000000000000000000000/versions/1",
        "temporaryDataReferenceType": "TemporaryBlobReference"
      },
      "StatusCode": 401,
      "ResponseHeaders": {
        "Connection": "keep-alive",
        "Content-Length": "7674",
        "Content-Type": "application/json; charset=utf-8",
        "Date": "Fri, 10 Feb 2023 20:07:48 GMT",
        "Request-Context": "appId=cid-v1:17d65b70-e9ce-4ed5-9347-1f660ec782e9",
        "Strict-Transport-Security": "max-age=15724800; includeSubDomains; preload",
        "x-aml-cluster": "vienna-eastus2euap-02",
        "X-Content-Type-Options": "nosniff",
        "x-ms-response-type": "error",
        "x-request-time": "0.544"
      },
      "ResponseBody": {
        "error": {
          "code": "UserError",
          "message": "User/tenant/subscription is not allowed to access registry sdk-test",
          "details": [],
          "additionalInfo": [
            {
              "type": "ComponentName",
              "info": {
                "value": "managementfrontend"
              }
            },
            {
              "type": "Correlation",
              "info": {
                "value": {
                  "operation": "8d745be4403adf5423358b3e7b5256ac",
                  "request": "a23dba8eff98e5b5"
                }
              }
            },
            {
              "type": "Environment",
              "info": {
                "value": "eastus2euap"
              }
            },
            {
              "type": "Location",
              "info": {
                "value": "eastus2euap"
              }
            },
            {
              "type": "Time",
              "info": {
                "value": "2023-02-10T20:07:48.7200717\u002B00:00"
              }
            },
            {
              "type": "DebugInfo",
              "info": {
                "value": {
                  "type": "Microsoft.MachineLearning.Common.Core.ServiceInvocationException",
                  "message": "Service invocation failed!\r\nRequest: POST assetstore.vienna-eastus2euap.svc/assetstore/v1.0/temporaryDataReference/createOrGet\r\nStatus Code: 403 Forbidden\r\nError Code: UserError/Auth/Authorization/UnAuthorizedRegistryAccess\r\nReason Phrase: User/tenant/subscription is not allowed to access registry sdk-test\r\nResponse Body: {\n  \u0022error\u0022: {\n    \u0022code\u0022: \u0022UserError\u0022,\n    \u0022severity\u0022: null,\n    \u0022message\u0022: \u0022User/tenant/subscription is not allowed to access registry sdk-test\u0022,\n    \u0022messageFormat\u0022: \u0022User/tenant/subscription is not allowed to access registry {feedName}\u0022,\n    \u0022messageParameters\u0022: {\n      \u0022feedName\u0022: \u0022sdk-test\u0022\n    },\n    \u0022referenceCode\u0022: null,\n    \u0022detailsUri\u0022: null,\n    \u0022target\u0022: null,\n    \u0022details\u0022: [],\n    \u0022innerError\u0022: {\n      \u0022code\u0022: \u0022Auth\u0022,\n      \u0022innerError\u0022: {\n        \u0022code\u0022: \u0022Authorization\u0022,\n        \u0022innerError\u0022: {\n          \u0022code\u0022: \u0022UnAuthorizedRegistryAccess\u0022,\n          \u0022innerError\u0022: null\n        }\n      }\n    },\n    \u0022debugInfo\u0022: null,\n    \u0022additionalInfo\u0022: null\n  },\n  \u0022correlation\u0022: {\n    \u0022operation\u0022: \u00228d745be4403adf5423358b3e7b5256ac\u0022,\n    \u0022request\u0022: \u0022d3591909c2f395ec\u0022\n  },\n  \u0022environment\u0022: \u0022eastus2euap\u0022,\n  \u0022location\u0022: \u0022eastus2euap\u0022,\n  \u0022time\u0022: \u00222023-02-10T20:07:48.7183436\u002B00:00\u0022,\n  \u0022componentName\u0022: \u0022assetstore\u0022\n}",
                  "stackTrace": "   at Microsoft.MachineLearning.Common.WebApi.Client.ServiceInvoker._MakeRequest(UriBuilder builder, MethodDetails details, CancellationToken cancellationToken, Nullable\u00601 initialStreamPosition, Uri fallbackServiceAddress, Object[] parameters) in /mnt/vss/_work/1/s/src/azureml-api/src/Common/WebApi.Client/ServiceInvoker.cs:line 911\n   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func\u00603 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates\u00601 shouldRetryResultPredicates, Func\u00605 onRetryAsync, Int32 permittedRetryCount, IEnumerable\u00601 sleepDurationsEnumerable, Func\u00604 sleepDurationProvider, Boolean continueOnCapturedContext)\n   at Polly.AsyncPolicy.ExecuteAsync[TResult](Func\u00603 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)\n   at Microsoft.MachineLearning.Common.WebApi.Client.ServiceInvoker._Invoke[T](String methodId, Object[] parameters) in /mnt/vss/_work/1/s/src/azureml-api/src/Common/WebApi.Client/ServiceInvoker.cs:line 264\n   at Microsoft.MachineLearning.ManagementFrontEnd.Services.Clients.AssetStoreClient.CreateOrGetTemporaryDataReference(TemporaryDataReferenceRequest temporaryDataReferenceRequest) in /mnt/vss/_work/1/s/src/azureml-api/src/ManagementFrontEnd/Services/Clients/AssetStoreClient.cs:line 82\n   at Microsoft.MachineLearning.ManagementFrontEnd.Services.AssetStoreService.CreateOrGetTemporaryDataReference(RegistryContext registry, String name, String version, TemporaryDataReferenceRequest temporaryDataReferenceRequest) in /mnt/vss/_work/1/s/src/azureml-api/src/ManagementFrontEnd/Services/Services/AssetStoreService.cs:line 55\n   at Microsoft.MachineLearning.ManagementFrontEnd.EntryPoints.Api.V20211001Dataplane.Controllers.TemporaryDataReferenceController.CreateOrGetTemporaryDataReference(RegistryContext registryContext, String name, String version, TemporaryDataReferenceRequestDto temporaryDataReferenceRequest, String apiVersion) in /mnt/vss/_work/1/s/src/azureml-api/src/ManagementFrontEnd/EntryPoints/Api/V20211001Dataplane/Controllers/TemporaryDataReferenceController.cs:line 50\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeActionMethodAsync\u003Eg__Logged|12_1(ControllerActionInvoker invoker)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeNextActionFilterAsync\u003Eg__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State\u0026 next, Scope\u0026 scope, Object\u0026 state, Boolean\u0026 isCompleted)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeInnerFilterAsync\u003Eg__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeNextExceptionFilterAsync\u003Eg__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)",
                  "innerException": null,
                  "data": {},
                  "errorResponse": {
                    "error": {
                      "code": "UserError",
                      "severity": null,
                      "message": "User/tenant/subscription is not allowed to access registry sdk-test",
                      "messageFormat": "User/tenant/subscription is not allowed to access registry {feedName}",
                      "messageParameters": {
                        "feedName": "sdk-test"
                      },
                      "referenceCode": null,
                      "detailsUri": null,
                      "target": null,
                      "details": [],
                      "innerError": {
                        "code": "Auth",
                        "innerError": {
                          "code": "Authorization",
                          "innerError": {
                            "code": "UnAuthorizedRegistryAccess",
                            "innerError": null
                          }
                        }
                      },
                      "debugInfo": null,
                      "additionalInfo": null
                    },
                    "correlation": {
                      "operation": "8d745be4403adf5423358b3e7b5256ac",
                      "request": "d3591909c2f395ec"
                    },
                    "environment": "eastus2euap",
                    "location": "eastus2euap",
                    "time": "2023-02-10T20:07:48.7183436\u002B00:00",
                    "componentName": "assetstore"
                  }
                }
              }
            },
            {
              "type": "InnerError",
              "info": {
                "value": {
                  "code": "Auth",
                  "innerError": {
                    "code": "Authorization",
                    "innerError": {
                      "code": "UnAuthorizedRegistryAccess",
                      "innerError": null
                    }
                  }
                }
              }
            }
          ]
        }
      }
    }
  ],
  "Variables": {
    "component_name": "test_168465172518"
  }
}
