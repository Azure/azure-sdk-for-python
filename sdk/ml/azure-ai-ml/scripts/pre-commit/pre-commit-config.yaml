files: 'sdk/ml/azure-ai-ml/'
repos:
- repo: https://github.com/pre-commit/pre-commit-hooks
  rev: v4.4.0
  hooks:
  - id: trailing-whitespace
  - id: end-of-file-fixer
  - id: check-yaml
    exclude: sdk/ml/azure-ai-ml/tests/test_configs/components/invalid
  # -   id: check-added-large-files
  - id: check-json
  - id: check-merge-conflict
- repo: https://github.com/psf/black
  rev: 23.1.0 # Replace by any tag/version: https://github.com/psf/black/tags
  hooks:
  - id: black
    language_version: python3 # Should be a command that runs python3.6+
    args:
        - "--line-length=120"
# seems that current repo is not compatible with flake8 6.0.0
#- repo: https://github.com/pycqa/flake8
#  rev: 6.0.0
#  hooks:
#  - id: flake8
- repo: https://github.com/hadialqattan/pycln
  rev: v2.1.3 # Possible releases: https://github.com/hadialqattan/pycln/tags
  hooks:
  - id: pycln
    name: "Clean unused python imports"
    args: [--config=setup.cfg]
    exclude: sdk/ml/azure-ai-ml/tests/test_configs
- repo: https://github.com/pycqa/isort
  rev: 5.12.0
  hooks:
    - id: isort
      # stages: [commit]
      name: isort-python
      # Use black profile for isort to avoid conflicts
      # see https://github.com/PyCQA/isort/issues/1518
      args: ["--profile", "black", --line-length=120]
- repo: local
  hooks:
  - id: pylint
    name: Pylint Check
    language: system
    # Please run `tox -c ../../../eng/tox/tox.ini -e pylint` to set up the environment before first run
    entry: sdk/ml/azure-ai-ml/.tox/lint/scripts/python.exe
    require_serial: true
    types:
      - python
    args:
      - -m
      - pylint
      - --rcfile=pylintrc
      - --output-format=parseable
# This is an experimental pre-commit to run specific tests when source code is changed.
# You'll need to set up a virtual environment under project root before the first run.
# Be careful to enable this as it will take a long time to run all tests and remember to
# switch to playback mode unless you understand what it takes to run live tests.
# It's more proper to add this to pre-push, please refer to https://pre-commit.com/#pre-commit-during-push
#- repo: local
#  hooks:
#  - id: pytest-pipeline
#    name: Pipeline related tests
#    files: 'sdk/ml/azure-ai-ml/azure/ai/ml/.*'
#    language: system
#    entry: bash -c 'cd sdk/ml/azure-ai-ml && venv/Scripts/pytest.exe -m pipeline_test'
#    require_serial: true
#    types:
#      - python
#    pass_filenames: false
#    verbose: true
