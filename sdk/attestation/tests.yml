trigger: none

stages:
 - template: ../../eng/pipelines/templates/stages/archetype-sdk-tests.yml
   parameters:
     ServiceDirectory: attestation
     Location: westus
     MatrixReplace:
       - TestSamples=.*/true

     EnvVars:
       AZURE_CLIENT_ID: "$(ATTESTATION_CLIENT_ID)"
       AZURE_TENANT_ID: "$(ATTESTATION_TENANT_ID)"
       AZURE_CLIENT_SECRET: "$(ATTESTATION_CLIENT_SECRET)"
       ATTESTATION_RESOURCE_MANAGER_URL: "$(ATTESTATION_RESOURCE_MANAGER_URL)"
       ATTESTATION_LOCATION: "$(ATTESTATION_LOCATION)"
       ATTESTATION_STORAGE_ENDPOINT_SUFFIX: "$(ATTESTATION_STORAGE_ENDPOINT_SUFFIX)"
       ATTESTATION_SUBSCRIPTION_ID: "$(ATTESTATION_SUBSCRIPTION_ID)"
       ATTESTATION_AZURE_AUTHORITY_HOST: "$(ATTESTATION_AZURE_AUTHORITY_HOST)"
       ATTESTATION_SERIALIZED_ISOLATED_SIGNING_KEY: "$(ATTESTATION_SERIALIZED_ISOLATED_SIGNING_KEY)"
       ATTESTATION_SERVICE_MANAGEMENT_URL: "$(ATTESTATION_SERVICE_MANAGEMENT_URL)"
       ATTESTATION_RESOURCE_GROUP: "$(ATTESTATION_RESOURCE_GROUP)"
       ATTESTATION_ENVIRONMENT: "$(ATTESTATION_ENVIRONMENT)"
       ATTESTATION_LOCATION_SHORT_NAME: "$(ATTESTATION_LOCATION_SHORT_NAME)"
       ATTESTATION_AAD_URL: "$(ATTESTATION_AAD_URL)"
       ATTESTATION_ISOLATED_URL: "$(ATTESTATION_ISOLATED_URL)"
       ATTESTATION_ISOLATED_SIGNING_KEY: "$(ATTESTATION_ISOLATED_SIGNING_KEY)"
       ATTESTATION_ISOLATED_SIGNING_CERTIFICATE: "$(ATTESTATION_ISOLATED_SIGNING_CERTIFICATE)"
       ATTESTATION_POLICY_SIGNING_KEY0: "$(ATTESTATION_POLICY_SIGNING_KEY0)"
       ATTESTATION_POLICY_SIGNING_KEY1: "$(ATTESTATION_POLICY_SIGNING_KEY1)"
       ATTESTATION_POLICY_SIGNING_KEY2: "$(ATTESTATION_POLICY_SIGNING_KEY2)"
       ATTESTATION_POLICY_SIGNING_CERTIFICATE0: "$(ATTESTATION_POLICY_SIGNING_CERTIFICATE0)"
       ATTESTATION_POLICY_SIGNING_CERTIFICATE1: "$(ATTESTATION_POLICY_SIGNING_CERTIFICATE1)"
       ATTESTATION_POLICY_SIGNING_CERTIFICATE2: "$(ATTESTATION_POLICY_SIGNING_CERTIFICATE2)"
       ATTESTATION_SERIALIZED_POLICY_SIGNING_KEY2: "$(ATTESTATION_SERIALIZED_POLICY_SIGNING_KEY2)"
       ATTESTATION_SERIALIZED_POLICY_SIGNING_KEY0: "$(ATTESTATION_SERIALIZED_POLICY_SIGNING_KEY0)"
       ATTESTATION_SERIALIZED_POLICY_SIGNING_KEY1: "$(ATTESTATION_SERIALIZED_POLICY_SIGNING_KEY1)"
       AZURE_SKIP_LIVE_RECORDING: 'True'
       AZURE_TEST_RUN_LIVE: 'True'
