interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Cookie:
      - esctx=AQABAAAAAAB2UyzwtQEKR7-rWbgdcBZIFxxDhtbOcwx3ttJtxVHI220rZOdqSgGidpL_N9cTDlDV4FNzbHaw_GI-GleGhy85fwLeAuXzN9CTvLT32Rg_2ZQsRsW4M4GPyFsjBe-mYA36al8UKS1UhKRRYV9JFuaZVVvGY-YFVaghIaEnDvOeOeTzNTJx7r03u8xO468jGbggAA;
        fpc=AneQlPTfmJtHu_t1BPNrCRo; stsservicecookie=estsfd; x-ms-gateway-slice=estsfd
      User-Agent:
      - azsdk-python-identity/1.5.0 Python/3.9.0 (Windows-10-10.0.19041-SP0)
    method: GET
    uri: xxxcommon/discovery/instance?api-version=1.1&authorization_endpoint=xxxcommon/oauth2/authorize
  response:
    body:
      string: '{"tenant_discovery_endpoint":"xxxcommon/.well-known/openid-configuration","api-version":"1.1","metadata":[{"preferred_network":"login.microsoftonline.com","preferred_cache":"login.windows.net","aliases":["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{"preferred_network":"login.partner.microsoftonline.cn","preferred_cache":"login.partner.microsoftonline.cn","aliases":["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{"preferred_network":"login.microsoftonline.de","preferred_cache":"login.microsoftonline.de","aliases":["login.microsoftonline.de"]},{"preferred_network":"login.microsoftonline.us","preferred_cache":"login.microsoftonline.us","aliases":["login.microsoftonline.us","login.usgovcloudapi.net"]},{"preferred_network":"login-us.microsoftonline.com","preferred_cache":"login-us.microsoftonline.com","aliases":["login-us.microsoftonline.com"]}]}'
    headers:
      access-control-allow-methods:
      - GET, OPTIONS
      access-control-allow-origin:
      - '*'
      cache-control:
      - max-age=86400, private
      content-length:
      - '945'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 09 Dec 2020 17:44:43 GMT
      p3p:
      - CP="DSP CUR OTPi IND OTRi ONL FIN"
      set-cookie:
      - fpc=AneQlPTfmJtHu_t1BPNrCRo; expires=Fri, 08-Jan-2021 17:44:43 GMT; path=/;
        secure; HttpOnly; SameSite=None
      - x-ms-gateway-slice=estsfd; path=/; secure; samesite=none; httponly
      - stsservicecookie=estsfd; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ests-server:
      - 2.1.11303.13 - WUS2 ProdSlices
    status:
      code: 200
      message: OK
- request:
    body: client_id=2fe370d0-ca5e-41d3-b3eb-0ecb1312e5be&grant_type=client_credentials&client_info=1&client_secret=c6842083-3a53-4b0f-b341-abed5729fd5c&scope=https%3A%2F%2Fattest.azure.net%2F.default
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '189'
      Content-Type:
      - application/x-www-form-urlencoded
      Cookie:
      - esctx=AQABAAAAAAB2UyzwtQEKR7-rWbgdcBZIFxxDhtbOcwx3ttJtxVHI220rZOdqSgGidpL_N9cTDlDV4FNzbHaw_GI-GleGhy85fwLeAuXzN9CTvLT32Rg_2ZQsRsW4M4GPyFsjBe-mYA36al8UKS1UhKRRYV9JFuaZVVvGY-YFVaghIaEnDvOeOeTzNTJx7r03u8xO468jGbggAA;
        fpc=AneQlPTfmJtHu_t1BPNrCRo; stsservicecookie=estsfd; x-ms-gateway-slice=estsfd
      User-Agent:
      - azsdk-python-identity/1.5.0 Python/3.9.0 (Windows-10-10.0.19041-SP0)
      x-client-cpu:
      - x64
      x-client-current-telemetry:
      - 1|730,0|
      x-client-os:
      - win32
      x-client-sku:
      - MSAL.Python
      x-client-ver:
      - 1.7.0
    method: POST
    uri: xxxtenant/oauth2/v2.0/token
  response:
    body:
      string: '{"token_type":"Bearer","expires_in":86399,"ext_expires_in":86399,"access_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6ImtnMkxZczJUMENUaklmajRydDZKSXluZW4zOCIsImtpZCI6ImtnMkxZczJUMENUaklmajRydDZKSXluZW4zOCJ9.eyJhdWQiOiJodHRwczovL2F0dGVzdC5henVyZS5uZXQiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC83MmY5ODhiZi04NmYxLTQxYWYtOTFhYi0yZDdjZDAxMWRiNDcvIiwiaWF0IjoxNjA3NTM1NTgzLCJuYmYiOjE2MDc1MzU1ODMsImV4cCI6MTYwNzYyMjI4MywiYWlvIjoiRTJSZ1lCRFIrdXB4Skczckx2YjVFa0p6cEFWdUFRQT0iLCJhcHBpZCI6IjJmZTM3MGQwLWNhNWUtNDFkMy1iM2ViLTBlY2IxMzEyZTViZSIsImFwcGlkYWNyIjoiMSIsImlkcCI6Imh0dHBzOi8vc3RzLndpbmRvd3MubmV0LzcyZjk4OGJmLTg2ZjEtNDFhZi05MWFiLTJkN2NkMDExZGI0Ny8iLCJvaWQiOiJjYWMzNDllMC1mODM0LTRmZTktYWQxYi03Mzg1ZmQyMjQyODQiLCJyaCI6IjAuQVJvQXY0ajVjdkdHcjBHUnF5MTgwQkhiUjlCdzR5OWV5dE5Ccy1zT3l4TVM1YjRhQUFBLiIsInN1YiI6ImNhYzM0OWUwLWY4MzQtNGZlOS1hZDFiLTczODVmZDIyNDI4NCIsInRpZCI6IjcyZjk4OGJmLTg2ZjEtNDFhZi05MWFiLTJkN2NkMDExZGI0NyIsInV0aSI6ImFMbEFWMWU5YlVDZ01JWmpJSTlZQUEiLCJ2ZXIiOiIxLjAifQ.F4zv31wNg3ylH68oJ44qviQ3aCqw7q7mqObml_mY4PRfaEQE5-yaXAsX5_4-6Uqn6AE7juTxcSdH9hCz6BJi4RDh9lOH5gQW5PxYeuMWze_jfdbEA76tcOmlpbCNY-YODQPyuNRDrm34jiQHmQViBcQX1hEg_yp_Ewq_ySiNHW70JtbB8wMw5-2ep4XqPvca4HBIwKOrNBU0sOt2sSku8GH4yaEahUQhFUwzQ67ZRQn-G0dFxo0s6X7kC8vHKkMeHBOg68jWmhS9e3jxpym37zwFr2PtK20u_DiL88wWJ1Qf0bSss8xAviXX53-X8HkebgGjk5bQuiHhkbeWbkMBOg"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '1317'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 09 Dec 2020 17:44:43 GMT
      expires:
      - '-1'
      p3p:
      - CP="DSP CUR OTPi IND OTRi ONL FIN"
      pragma:
      - no-cache
      set-cookie:
      - fpc=AneQlPTfmJtHu_t1BPNrCRrujS-SAQAAAAsEY9cOAAAA; expires=Fri, 08-Jan-2021
        17:44:43 GMT; path=/; secure; HttpOnly; SameSite=None
      - x-ms-gateway-slice=estsfd; path=/; secure; samesite=none; httponly
      - stsservicecookie=estsfd; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-clitelem:
      - 1,0,0,,
      x-ms-ests-server:
      - 2.1.11303.13 - NCUS ProdSlices
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - azsdk-python-security-attestation/0.1.0 Python/3.9.0 (Windows-10-10.0.19041-SP0)
    method: GET
    uri: https://pylarryoattestationiso.xxx.attest.azure.net/policies/SgxEnclave?api-version=2020-10-01
  response:
    body:
      string: '{"token":"eyJhbGciOiAiUlMyNTYiLCAiamt1IjogImh0dHBzOi8vcHlsYXJyeW9hdHRlc3RhdGlvbmlzby53dXMuYXR0ZXN0LmF6dXJlLm5ldC9jZXJ0cyIsICJraWQiOiAiMTVOMk1Ib2o5aUFka0YvYzVuUkUzSjJIQjhKRzZWdWUzVXp2dTNLL1Nlcz0iLCAidHlwIjogIkpXVCJ9.eyJleHAiOiAxNjA3NTM5NDg1LCAiaWF0IjogMTYwNzUzNTg4NSwgImlzcyI6ICJodHRwczovL3B5bGFycnlvYXR0ZXN0YXRpb25pc28ud3VzLmF0dGVzdC5henVyZS5uZXQiLCAibmJmIjogMTYwNzUzNTg4NSwgIngtbXMtcG9saWN5IjogImV5SmhiR2NpT2lKdWIyNWxJbjAuZXlKQmRIUmxjM1JoZEdsdmJsQnZiR2xqZVNJNklDSmtiVlo1WXpKc2RtSnFNR2ROVXpSM1R6SkdNV1JIYUhaamJXdzJXVmhTY0dJeU5YbGtWM2hzWXpOMGFrOXNkREJsV0VKc1VGUXdhVXBIYkhwTVYxSnNXVzVXYmxveVJtbGlSMVZwV0ZOQk9WQnBRbmRhV0VwMFlWaFJiMHRVZERsUE1teDZZek5XYUdKdFRteGpibFp6V2xoT04xbDZjR0prU0d4M1dsUXdPVWxwVW5CamVURnJXbGRLTVZveVpHaFpiWGhzU1d3d1oxQlVOR2RoV0U1NlpGZFZiMlJJYkhkYVZEQnBZVmhOZEZwSFZtbGtWMlJ1V1ZkS2MxcFRTWE5KU0Zwb1lraFdiRkJYVFhWa2JVWnpaRmRWY0U4eVRUWlhNMUkxWTBkVk9WQlRTV3RqTW1RMFRGY3hlV015Ykc1aWJWWjVTV3d3WjFCVU5HZGhXRTU2WkZkVmIyUkliSGRhVkRCcFl6SmtORXhYTVhsak1teHVZbTFXZVVscGQyZGtiVVp6WkZkVk9WbDVOVEpaVjNneFdsTnJOMWw2Y0dKa1NHeDNXbFF3T1VscFVucGFNMmQwWWxoS2JHSnRUbk5aV0Zwc1NXd3daMUJVTkdkaFdFNTZaRmRWYjJSSWJIZGFWREJwWXpKa05FeFhNWGxhVnpWcVlrZEdNbHBUU1hOSlNGcG9Za2hXYkZCWFRYVmtiVVp6WkZkVmNFOHlUVFpYTTFJMVkwZFZPVkJUU1d0alNFcDJXa2hXYW1SRE1YQmFRMHBrU1VRd0xVbEhiSHBqTTFac1MwaFNOV05IVlRsSmJrSjVZakpTTVZrelVYUmhWMUZwVEVOQ01sbFhlREZhVkRGcVRHNWFhR0pJVm14TFZIUnFUMngwTUdWWVFteFFWREJwU2toT01tSnBTbVJKUkRBdFNVZHNlbU16Vm14TFNGSTFZMGRWT1VsdVRqSmlhVWx6U1VoYWFHSklWbXhRVjAxMVpHMUdjMlJYVlhCUE1rMDJWek5TTldOSFZUbFFVMGxyWkVkV2JFbHNNR2RRVkRSbllWaE9lbVJYVlc5a1NHeDNXbFF3YVdSSFZteEphWGRuWkcxR2MyUlhWVGxaZVRVeVdWZDRNVnBUYXpkbVZITWlmUS4ifQ.hjN1NAI2j8z8k6ARE-ZH1VOlQoGe9lBIJc9mvmPlCO3235RX-GRiiCAZ4GCm9dqpGcHrfJluB5WtaS6m_UXQBQdCx-P__DIIU_iXYVUfIpIjO3sxEjXVlIhjUtyH0Vs9fZxgjNbXiZ4Hp3rHO0-xPJsg3s-ILL5zUsrx0wwJxi4"}'
    headers:
      content-length:
      - '1783'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 09 Dec 2020 17:44:44 GMT
      server:
      - Kestrel
      x-ms-maa-service-version:
      - 1.10.01432.0002
    status:
      code: 200
      message: OK
version: 1
