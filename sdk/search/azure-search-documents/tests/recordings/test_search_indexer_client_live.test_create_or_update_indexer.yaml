interactions:
- request:
    body: '{"name": "sample-datasource", "type": "azureblob", "credentials": {"connectionString":
      "connection_string"}, "container": {"name": "searchcontainer"}}'
    headers:
      Accept:
      - application/json;odata.metadata=minimal
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '319'
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-search-documents/11.3.0b3 Python/3.9.2 (Windows-10-10.0.19041-SP0)
    method: POST
    uri: https://search8001902.search.windows.net/datasources?api-version=2021-04-30-Preview
  response:
    body:
      string: '{"@odata.context":"https://search8001902.search.windows.net/$metadata#datasources/$entity","@odata.etag":"\"0x8D96CA8081F62D4\"","name":"sample-datasource","description":null,"type":"azureblob","subtype":null,"credentials":{"connectionString":null},"container":{"name":"searchcontainer","query":null},"dataChangeDetectionPolicy":null,"dataDeletionDetectionPolicy":null,"encryptionKey":null,"identity":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '406'
      content-type:
      - application/json; odata.metadata=minimal
      date:
      - Tue, 31 Aug 2021 17:51:59 GMT
      elapsed-time:
      - '89'
      etag:
      - W/"0x8D96CA8081F62D4"
      expires:
      - '-1'
      location:
      - https://search8001902.search.windows.net/datasources('sample-datasource')?api-version=2021-04-30-Preview
      odata-version:
      - '4.0'
      pragma:
      - no-cache
      preference-applied:
      - odata.include-annotations="*"
      request-id:
      - 24ebd3ab-0a84-11ec-b458-74c63bed1137
      strict-transport-security:
      - max-age=15724800; includeSubDomains
    status:
      code: 201
      message: Created
- request:
    body: '{"name": "hotels", "fields": [{"name": "hotelId", "type": "Edm.String",
      "key": true, "retrievable": true, "searchable": false}]}'
    headers:
      Accept:
      - application/json;odata.metadata=minimal
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '128'
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-search-documents/11.3.0b3 Python/3.9.2 (Windows-10-10.0.19041-SP0)
    method: POST
    uri: https://search8001902.search.windows.net/indexes?api-version=2021-04-30-Preview
  response:
    body:
      string: '{"@odata.context":"https://search8001902.search.windows.net/$metadata#indexes/$entity","@odata.etag":"\"0x8D96CA809CF0363\"","name":"hotels","defaultScoringProfile":null,"fields":[{"name":"hotelId","type":"Edm.String","searchable":false,"filterable":true,"retrievable":true,"sortable":true,"facetable":true,"key":true,"indexAnalyzer":null,"searchAnalyzer":null,"analyzer":null,"normalizer":null,"synonymMaps":[]}],"scoringProfiles":[],"corsOptions":null,"suggesters":[],"analyzers":[],"normalizers":[],"tokenizers":[],"tokenFilters":[],"charFilters":[],"encryptionKey":null,"similarity":{"@odata.type":"#Microsoft.Azure.Search.BM25Similarity","k1":null,"b":null}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '663'
      content-type:
      - application/json; odata.metadata=minimal
      date:
      - Tue, 31 Aug 2021 17:52:02 GMT
      elapsed-time:
      - '2606'
      etag:
      - W/"0x8D96CA809CF0363"
      expires:
      - '-1'
      location:
      - https://search8001902.search.windows.net/indexes('hotels')?api-version=2021-04-30-Preview
      odata-version:
      - '4.0'
      pragma:
      - no-cache
      preference-applied:
      - odata.include-annotations="*"
      request-id:
      - 251bd2a2-0a84-11ec-a98f-74c63bed1137
      strict-transport-security:
      - max-age=15724800; includeSubDomains
    status:
      code: 201
      message: Created
- request:
    body: '{"name": "sample-indexer", "dataSourceName": "sample-datasource", "targetIndexName":
      "hotels", "disabled": false}'
    headers:
      Accept:
      - application/json;odata.metadata=minimal
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '113'
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-search-documents/11.3.0b3 Python/3.9.2 (Windows-10-10.0.19041-SP0)
    method: POST
    uri: https://search8001902.search.windows.net/indexers?api-version=2021-04-30-Preview
  response:
    body:
      string: '{"error":{"code":"","message":"Error with data source: Credentials
        provided in the connection string are invalid or have expired.\r\nAs a result
        of a one-time maintenance activity, your search service went through a change
        of the IP address for its API endpoint. This caused indexers that depend on
        network access rules on the data source to stop working. In order to address
        this issue, please update the network access rules in your data source to
        use the new IP address. We apologize for the inconvenience.\r\nFor more information
        on troubleshooting connection issues to Azure Storage accounts, please see
        https://go.microsoft.com/fwlink/?linkid=2049388  Please adjust your data source
        definition in order to proceed."}}'
    headers:
      cache-control:
      - no-cache
      content-language:
      - en
      content-length:
      - '723'
      content-type:
      - application/json; odata.metadata=minimal
      date:
      - Tue, 31 Aug 2021 17:52:03 GMT
      elapsed-time:
      - '804'
      expires:
      - '-1'
      odata-version:
      - '4.0'
      pragma:
      - no-cache
      preference-applied:
      - odata.include-annotations="*"
      request-id:
      - 26ecc941-0a84-11ec-a4d3-74c63bed1137
      strict-transport-security:
      - max-age=15724800; includeSubDomains
    status:
      code: 400
      message: Bad Request
version: 1
