interactions:
- request:
    body: '{"autoScaleFormula": "$TargetDedicatedNodes=2", "autoScaleEvaluationInterval":
      "PT6M"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '86'
      Content-Type:
      - application/json; odata=minimalmetadata; charset=utf-8
      User-Agent:
      - python/3.7.5 (Windows-10-10.0.22000-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-batch/12.0.0 Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Sun, 09 Jan 2022 08:05:53 GMT
    method: POST
    uri: https://batch.southcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/enableautoscale?api-version=2022-01-01.15.0
  response:
    body:
      string: ''
    headers:
      dataserviceid:
      - https://batche2690d64.southcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/enableautoscale
      dataserviceversion:
      - '3.0'
      date:
      - Sun, 09 Jan 2022 08:05:53 GMT
      etag:
      - '0x8D9D346DB8A035D'
      last-modified:
      - Sun, 09 Jan 2022 08:05:53 GMT
      request-id:
      - 84c78fef-7eaf-4f1f-9f99-9a132bab2126
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"autoScaleFormula": "$TargetDedicatedNodes=3"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '47'
      Content-Type:
      - application/json; odata=minimalmetadata; charset=utf-8
      User-Agent:
      - python/3.7.5 (Windows-10-10.0.22000-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-batch/12.0.0 Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Sun, 09 Jan 2022 08:05:54 GMT
    method: POST
    uri: https://batch.southcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/evaluateautoscale?api-version=2022-01-01.15.0
  response:
    body:
      string: "{\r\n  \"odata.metadata\":\"https://batch.southcentralus.batch.azure.com/$metadata#Microsoft.Azure.Batch.Protocol.Entities.AutoScaleRun\",\"timestamp\":\"2022-01-09T08:05:54.7013717Z\",\"results\":\"$TargetDedicatedNodes=3;$TargetLowPriorityNodes=0;$NodeDeallocationOption=requeue\"\r\n}"
    headers:
      content-type:
      - application/json;odata=minimalmetadata
      dataserviceid:
      - https://batche2690d64.southcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/evaluateautoscale
      dataserviceversion:
      - '3.0'
      date:
      - Sun, 09 Jan 2022 08:05:53 GMT
      request-id:
      - ede2bffe-aab2-4b3b-9287-90eb06563b93
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - python/3.7.5 (Windows-10-10.0.22000-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-batch/12.0.0 Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Sun, 09 Jan 2022 08:05:54 GMT
    method: POST
    uri: https://batch.southcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/disableautoscale?api-version=2022-01-01.15.0
  response:
    body:
      string: ''
    headers:
      dataserviceid:
      - https://batche2690d64.southcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/disableautoscale
      dataserviceversion:
      - '3.0'
      date:
      - Sun, 09 Jan 2022 08:05:53 GMT
      etag:
      - '0x8D9D346DC5C9684'
      last-modified:
      - Sun, 09 Jan 2022 08:05:54 GMT
      request-id:
      - 798be6d4-b53f-4fd7-8304-de7fe0b9bba2
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python/3.7.5 (Windows-10-10.0.22000-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-batch/12.0.0 Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Sun, 09 Jan 2022 08:05:54 GMT
    method: GET
    uri: https://batch.southcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64?api-version=2022-01-01.15.0
  response:
    body:
      string: "{\r\n  \"odata.metadata\":\"https://batch.southcentralus.batch.azure.com/$metadata#pools/@Element\",\"id\":\"test_batch_test_batch_scale_poolse2690d64\",\"displayName\":\"test_pool\",\"url\":\"https://batch.southcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64\",\"eTag\":\"0x8D9D346DC5C9684\",\"lastModified\":\"2022-01-09T08:05:54.786266Z\",\"creationTime\":\"2022-01-09T08:05:53.4062429Z\",\"state\":\"active\",\"stateTransitionTime\":\"2022-01-09T08:05:53.4062429Z\",\"allocationState\":\"steady\",\"allocationStateTransitionTime\":\"2022-01-09T08:05:54.8202701Z\",\"vmSize\":\"standard_d1_v2\",\"resizeTimeout\":\"PT15M\",\"currentDedicatedNodes\":0,\"targetDedicatedNodes\":0,\"currentLowPriorityNodes\":0,\"targetLowPriorityNodes\":0,\"enableAutoScale\":false,\"enableInterNodeCommunication\":false,\"userAccounts\":[\r\n
        \   {\r\n      \"name\":\"task-user\",\"elevationLevel\":\"admin\"\r\n    }\r\n
        \ ],\"taskSlotsPerNode\":1,\"taskSchedulingPolicy\":{\r\n    \"nodeFillType\":\"Spread\"\r\n
        \ },\"virtualMachineConfiguration\":{\r\n    \"imageReference\":{\r\n      \"publisher\":\"Canonical\",\"offer\":\"UbuntuServer\",\"sku\":\"18.04-LTS\",\"version\":\"latest\"\r\n
        \   },\"nodeAgentSKUId\":\"batch.node.ubuntu 18.04\"\r\n  }\r\n}"
    headers:
      content-type:
      - application/json;odata=minimalmetadata
      dataserviceversion:
      - '3.0'
      date:
      - Sun, 09 Jan 2022 08:05:54 GMT
      etag:
      - '0x8D9D346DC5C9684'
      last-modified:
      - Sun, 09 Jan 2022 08:05:54 GMT
      request-id:
      - d6737dda-29f9-42e4-8593-9a11c2ffcb32
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"targetDedicatedNodes": 0, "targetLowPriorityNodes": 2}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '56'
      Content-Type:
      - application/json; odata=minimalmetadata; charset=utf-8
      User-Agent:
      - python/3.7.5 (Windows-10-10.0.22000-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-batch/12.0.0 Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Sun, 09 Jan 2022 08:05:55 GMT
    method: POST
    uri: https://batch.southcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/resize?api-version=2022-01-01.15.0
  response:
    body:
      string: ''
    headers:
      dataserviceid:
      - https://batche2690d64.southcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/resize
      dataserviceversion:
      - '3.0'
      date:
      - Sun, 09 Jan 2022 08:05:54 GMT
      etag:
      - '0x8D9D346DC7B90EF'
      last-modified:
      - Sun, 09 Jan 2022 08:05:54 GMT
      request-id:
      - 31627727-1941-4962-a33f-dc5b24994fb7
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - python/3.7.5 (Windows-10-10.0.22000-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-batch/12.0.0 Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Sun, 09 Jan 2022 08:05:55 GMT
    method: POST
    uri: https://batch.southcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/stopresize?api-version=2022-01-01.15.0
  response:
    body:
      string: "{\r\n  \"odata.metadata\":\"https://batch.southcentralus.batch.azure.com/$metadata#Microsoft.Azure.Batch.Protocol.Entities.Container.errors/@Element\",\"code\":\"OperationInvalidForCurrentState\",\"message\":{\r\n
        \   \"lang\":\"en-US\",\"value\":\"The specified operation is not valid for
        the current state of the resource.\\nRequestId:d38891b1-6b0e-46f8-a8f6-6dd981309fec\\nTime:2022-01-09T08:05:55.0983718Z\"\r\n
        \ }\r\n}"
    headers:
      content-length:
      - '402'
      content-type:
      - application/json;odata=minimalmetadata
      dataserviceversion:
      - '3.0'
      date:
      - Sun, 09 Jan 2022 08:05:54 GMT
      request-id:
      - d38891b1-6b0e-46f8-a8f6-6dd981309fec
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 409
      message: The specified operation is not valid for the current state of the resource.
version: 1
