interactions:
- request:
    body: '{"autoScaleFormula": "$TargetDedicatedNodes=2", "autoScaleEvaluationInterval":
      "PT6M"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '86'
      Content-Type:
      - application/json; odata=minimalmetadata; charset=utf-8
      User-Agent:
      - python/3.8.7 (Windows-10-10.0.22621-SP0) msrest/0.7.1 msrest_azure/0.6.4 azure-batch/13.0.1
        Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Wed, 24 May 2023 10:00:57 GMT
    method: POST
    uri: https://batch.eastasia.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/enableautoscale?api-version=2023-05-01.17.0
  response:
    body:
      string: ''
    headers:
      dataserviceid:
      - https://batche2690d64.eastasia.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/enableautoscale
      dataserviceversion:
      - '3.0'
      date:
      - Wed, 24 May 2023 10:00:59 GMT
      etag:
      - '0x8DB5C3DC5F548A7'
      last-modified:
      - Wed, 24 May 2023 10:00:58 GMT
      request-id:
      - b279aeae-8f95-41fe-b98f-480b4aabdc6b
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"autoScaleFormula": "$TargetDedicatedNodes=3"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '47'
      Content-Type:
      - application/json; odata=minimalmetadata; charset=utf-8
      User-Agent:
      - python/3.8.7 (Windows-10-10.0.22621-SP0) msrest/0.7.1 msrest_azure/0.6.4 azure-batch/13.0.1
        Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Wed, 24 May 2023 10:00:59 GMT
    method: POST
    uri: https://batch.eastasia.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/evaluateautoscale?api-version=2023-05-01.17.0
  response:
    body:
      string: "{\r\n  \"odata.metadata\":\"https://batch.eastasia.batch.azure.com/$metadata#Microsoft.Azure.Batch.Protocol.Entities.AutoScaleRun\",\"timestamp\":\"2023-05-24T10:01:00.2350112Z\",\"results\":\"$TargetDedicatedNodes=3;$TargetLowPriorityNodes=0;$NodeDeallocationOption=requeue\"\r\n}"
    headers:
      content-type:
      - application/json;odata=minimalmetadata
      dataserviceid:
      - https://batche2690d64.eastasia.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/evaluateautoscale
      dataserviceversion:
      - '3.0'
      date:
      - Wed, 24 May 2023 10:00:59 GMT
      request-id:
      - b01a428a-e57d-40a6-bc71-0c090bf60259
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python/3.8.7 (Windows-10-10.0.22621-SP0) msrest/0.7.1 msrest_azure/0.6.4 azure-batch/13.0.1
        Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Wed, 24 May 2023 10:00:59 GMT
    method: GET
    uri: https://batch.eastasia.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64?api-version=2023-05-01.17.0
  response:
    body:
      string: "{\r\n  \"odata.metadata\":\"https://batch.eastasia.batch.azure.com/$metadata#pools/@Element\",\"id\":\"test_batch_test_batch_scale_poolse2690d64\",\"displayName\":\"test_pool\",\"url\":\"https://batch.eastasia.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64\",\"eTag\":\"0x8DB5C3DC5F548A7\",\"lastModified\":\"2023-05-24T10:00:58.7004071Z\",\"creationTime\":\"2023-05-24T10:00:58.7004071Z\",\"state\":\"active\",\"stateTransitionTime\":\"2023-05-24T10:00:58.7004071Z\",\"allocationState\":\"steady\",\"allocationStateTransitionTime\":\"2023-05-24T10:01:00.0294277Z\",\"vmSize\":\"standard_d2_v2\",\"resizeTimeout\":\"PT15M\",\"currentDedicatedNodes\":0,\"targetDedicatedNodes\":0,\"currentLowPriorityNodes\":0,\"targetLowPriorityNodes\":0,\"enableAutoScale\":true,\"autoScaleFormula\":\"$TargetDedicatedNodes=2\",\"autoScaleEvaluationInterval\":\"PT6M\",\"enableInterNodeCommunication\":false,\"userAccounts\":[\r\n
        \   {\r\n      \"name\":\"task-user\",\"elevationLevel\":\"admin\"\r\n    }\r\n
        \ ],\"taskSlotsPerNode\":1,\"taskSchedulingPolicy\":{\r\n    \"nodeFillType\":\"Spread\"\r\n
        \ },\"virtualMachineConfiguration\":{\r\n    \"imageReference\":{\r\n      \"publisher\":\"Canonical\",\"offer\":\"UbuntuServer\",\"sku\":\"18.04-LTS\",\"version\":\"latest\"\r\n
        \   },\"nodeAgentSKUId\":\"batch.node.ubuntu 18.04\"\r\n  }\r\n}"
    headers:
      content-type:
      - application/json;odata=minimalmetadata
      dataserviceversion:
      - '3.0'
      date:
      - Wed, 24 May 2023 10:01:00 GMT
      etag:
      - '0x8DB5C3DC5F548A7'
      last-modified:
      - Wed, 24 May 2023 10:00:58 GMT
      request-id:
      - 3a579677-6486-4603-b789-65a68474f2cc
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - python/3.8.7 (Windows-10-10.0.22621-SP0) msrest/0.7.1 msrest_azure/0.6.4 azure-batch/13.0.1
        Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Wed, 24 May 2023 10:00:59 GMT
    method: POST
    uri: https://batch.eastasia.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/disableautoscale?api-version=2023-05-01.17.0
  response:
    body:
      string: ''
    headers:
      dataserviceid:
      - https://batche2690d64.eastasia.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/disableautoscale
      dataserviceversion:
      - '3.0'
      date:
      - Wed, 24 May 2023 10:01:00 GMT
      etag:
      - '0x8DB5C3DC704B28C'
      last-modified:
      - Wed, 24 May 2023 10:01:00 GMT
      request-id:
      - c5551308-de5e-4007-a570-77323c5084aa
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python/3.8.7 (Windows-10-10.0.22621-SP0) msrest/0.7.1 msrest_azure/0.6.4 azure-batch/13.0.1
        Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Wed, 24 May 2023 10:00:59 GMT
    method: GET
    uri: https://batch.eastasia.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64?api-version=2023-05-01.17.0
  response:
    body:
      string: "{\r\n  \"odata.metadata\":\"https://batch.eastasia.batch.azure.com/$metadata#pools/@Element\",\"id\":\"test_batch_test_batch_scale_poolse2690d64\",\"displayName\":\"test_pool\",\"url\":\"https://batch.eastasia.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64\",\"eTag\":\"0x8DB5C3DC704B28C\",\"lastModified\":\"2023-05-24T10:01:00.4791436Z\",\"creationTime\":\"2023-05-24T10:00:58.7004071Z\",\"state\":\"active\",\"stateTransitionTime\":\"2023-05-24T10:00:58.7004071Z\",\"allocationState\":\"steady\",\"allocationStateTransitionTime\":\"2023-05-24T10:01:00.5472363Z\",\"vmSize\":\"standard_d2_v2\",\"resizeTimeout\":\"PT15M\",\"currentDedicatedNodes\":0,\"targetDedicatedNodes\":0,\"currentLowPriorityNodes\":0,\"targetLowPriorityNodes\":0,\"enableAutoScale\":false,\"enableInterNodeCommunication\":false,\"userAccounts\":[\r\n
        \   {\r\n      \"name\":\"task-user\",\"elevationLevel\":\"admin\"\r\n    }\r\n
        \ ],\"taskSlotsPerNode\":1,\"taskSchedulingPolicy\":{\r\n    \"nodeFillType\":\"Spread\"\r\n
        \ },\"virtualMachineConfiguration\":{\r\n    \"imageReference\":{\r\n      \"publisher\":\"Canonical\",\"offer\":\"UbuntuServer\",\"sku\":\"18.04-LTS\",\"version\":\"latest\"\r\n
        \   },\"nodeAgentSKUId\":\"batch.node.ubuntu 18.04\"\r\n  }\r\n}"
    headers:
      content-type:
      - application/json;odata=minimalmetadata
      dataserviceversion:
      - '3.0'
      date:
      - Wed, 24 May 2023 10:01:00 GMT
      etag:
      - '0x8DB5C3DC704B28C'
      last-modified:
      - Wed, 24 May 2023 10:01:00 GMT
      request-id:
      - e36fb115-80da-4aa2-9875-7e946dfdbc63
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"targetDedicatedNodes": 0, "targetLowPriorityNodes": 2}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '56'
      Content-Type:
      - application/json; odata=minimalmetadata; charset=utf-8
      User-Agent:
      - python/3.8.7 (Windows-10-10.0.22621-SP0) msrest/0.7.1 msrest_azure/0.6.4 azure-batch/13.0.1
        Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Wed, 24 May 2023 10:00:59 GMT
    method: POST
    uri: https://batch.eastasia.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/resize?api-version=2023-05-01.17.0
  response:
    body:
      string: ''
    headers:
      dataserviceid:
      - https://batche2690d64.eastasia.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/resize
      dataserviceversion:
      - '3.0'
      date:
      - Wed, 24 May 2023 10:01:00 GMT
      etag:
      - '0x8DB5C3DC72C3B3B'
      last-modified:
      - Wed, 24 May 2023 10:01:00 GMT
      request-id:
      - 8ef59bef-b93f-47db-bf2c-537a711320c1
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - python/3.8.7 (Windows-10-10.0.22621-SP0) msrest/0.7.1 msrest_azure/0.6.4 azure-batch/13.0.1
        Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Wed, 24 May 2023 10:00:59 GMT
    method: POST
    uri: https://batch.eastasia.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/stopresize?api-version=2023-05-01.17.0
  response:
    body:
      string: ''
    headers:
      dataserviceid:
      - https://batche2690d64.eastasia.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/stopresize
      dataserviceversion:
      - '3.0'
      date:
      - Wed, 24 May 2023 10:01:00 GMT
      etag:
      - '0x8DB5C3DC72C3B3B'
      last-modified:
      - Wed, 24 May 2023 10:01:00 GMT
      request-id:
      - e0ceb0f8-1d85-46c7-b78d-a248fa30bea2
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python/3.8.7 (Windows-10-10.0.22621-SP0) msrest/0.7.1 msrest_azure/0.6.4 azure-batch/13.0.1
        Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Wed, 24 May 2023 10:00:59 GMT
    method: GET
    uri: https://batch.eastasia.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64?api-version=2023-05-01.17.0
  response:
    body:
      string: "{\r\n  \"odata.metadata\":\"https://batch.eastasia.batch.azure.com/$metadata#pools/@Element\",\"id\":\"test_batch_test_batch_scale_poolse2690d64\",\"displayName\":\"test_pool\",\"url\":\"https://batch.eastasia.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64\",\"eTag\":\"0x8DB5C3DC72C3B3B\",\"lastModified\":\"2023-05-24T10:01:00.7382331Z\",\"creationTime\":\"2023-05-24T10:00:58.7004071Z\",\"state\":\"active\",\"stateTransitionTime\":\"2023-05-24T10:00:58.7004071Z\",\"allocationState\":\"stopping\",\"allocationStateTransitionTime\":\"2023-05-24T10:01:00.8852359Z\",\"vmSize\":\"standard_d2_v2\",\"resizeTimeout\":\"PT15M\",\"currentDedicatedNodes\":0,\"targetDedicatedNodes\":0,\"currentLowPriorityNodes\":0,\"targetLowPriorityNodes\":2,\"enableAutoScale\":false,\"enableInterNodeCommunication\":false,\"userAccounts\":[\r\n
        \   {\r\n      \"name\":\"task-user\",\"elevationLevel\":\"admin\"\r\n    }\r\n
        \ ],\"taskSlotsPerNode\":1,\"taskSchedulingPolicy\":{\r\n    \"nodeFillType\":\"Spread\"\r\n
        \ },\"virtualMachineConfiguration\":{\r\n    \"imageReference\":{\r\n      \"publisher\":\"Canonical\",\"offer\":\"UbuntuServer\",\"sku\":\"18.04-LTS\",\"version\":\"latest\"\r\n
        \   },\"nodeAgentSKUId\":\"batch.node.ubuntu 18.04\"\r\n  }\r\n}"
    headers:
      content-type:
      - application/json;odata=minimalmetadata
      dataserviceversion:
      - '3.0'
      date:
      - Wed, 24 May 2023 10:01:00 GMT
      etag:
      - '0x8DB5C3DC72C3B3B'
      last-modified:
      - Wed, 24 May 2023 10:01:00 GMT
      request-id:
      - 12359b7a-2617-4e47-a6f9-9f9f461ace2a
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python/3.8.7 (Windows-10-10.0.22621-SP0) msrest/0.7.1 msrest_azure/0.6.4 azure-batch/13.0.1
        Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Wed, 24 May 2023 10:01:04 GMT
    method: GET
    uri: https://batch.eastasia.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64?api-version=2023-05-01.17.0
  response:
    body:
      string: "{\r\n  \"odata.metadata\":\"https://batch.eastasia.batch.azure.com/$metadata#pools/@Element\",\"id\":\"test_batch_test_batch_scale_poolse2690d64\",\"displayName\":\"test_pool\",\"url\":\"https://batch.eastasia.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64\",\"eTag\":\"0x8DB5C3DC72C3B3B\",\"lastModified\":\"2023-05-24T10:01:00.7382331Z\",\"creationTime\":\"2023-05-24T10:00:58.7004071Z\",\"state\":\"active\",\"stateTransitionTime\":\"2023-05-24T10:00:58.7004071Z\",\"allocationState\":\"steady\",\"allocationStateTransitionTime\":\"2023-05-24T10:01:05.887237Z\",\"vmSize\":\"standard_d2_v2\",\"resizeTimeout\":\"PT15M\",\"currentDedicatedNodes\":0,\"targetDedicatedNodes\":0,\"currentLowPriorityNodes\":0,\"targetLowPriorityNodes\":2,\"resizeErrors\":[\r\n
        \   {\r\n      \"code\":\"ResizeStopped\",\"message\":\"Desired number of
        low priority nodes could not be allocated due to a stop resize operation\"\r\n
        \   }\r\n  ],\"enableAutoScale\":false,\"enableInterNodeCommunication\":false,\"userAccounts\":[\r\n
        \   {\r\n      \"name\":\"task-user\",\"elevationLevel\":\"admin\"\r\n    }\r\n
        \ ],\"taskSlotsPerNode\":1,\"taskSchedulingPolicy\":{\r\n    \"nodeFillType\":\"Spread\"\r\n
        \ },\"virtualMachineConfiguration\":{\r\n    \"imageReference\":{\r\n      \"publisher\":\"Canonical\",\"offer\":\"UbuntuServer\",\"sku\":\"18.04-LTS\",\"version\":\"latest\"\r\n
        \   },\"nodeAgentSKUId\":\"batch.node.ubuntu 18.04\"\r\n  }\r\n}"
    headers:
      content-type:
      - application/json;odata=minimalmetadata
      dataserviceversion:
      - '3.0'
      date:
      - Wed, 24 May 2023 10:01:05 GMT
      etag:
      - '0x8DB5C3DC72C3B3B'
      last-modified:
      - Wed, 24 May 2023 10:01:00 GMT
      request-id:
      - 86fc3c63-59fb-45ff-b150-b49a29086308
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python/3.8.7 (Windows-10-10.0.22621-SP0) msrest/0.7.1 msrest_azure/0.6.4 azure-batch/13.0.1
        Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Wed, 24 May 2023 10:01:05 GMT
    method: GET
    uri: https://batch.eastasia.batch.azure.com/poolusagemetrics?api-version=2023-05-01.17.0
  response:
    body:
      string: "{\r\n  \"odata.metadata\":\"https://batch.eastasia.batch.azure.com/$metadata#poolusagemetrics\",\"value\":[]\r\n}"
    headers:
      content-type:
      - application/json;odata=minimalmetadata
      dataserviceversion:
      - '3.0'
      date:
      - Wed, 24 May 2023 10:01:06 GMT
      request-id:
      - d8fb4db5-21a5-42d0-8331-00cfdd231a28
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
version: 1
