interactions:
- request:
    body: '{"autoScaleFormula": "$TargetDedicatedNodes=2", "autoScaleEvaluationInterval":
      "PT6M"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '86'
      Content-Type:
      - application/json; odata=minimalmetadata; charset=utf-8
      User-Agent:
      - python/3.8.5 (macOS-10.15.7-x86_64-i386-64bit) msrest/0.6.19 msrest_azure/0.6.4
        azure-batch/9.0.1 Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Tue, 24 Nov 2020 02:08:20 GMT
    method: POST
    uri: https://batch.westcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/enableautoscale?api-version=2020-09-01.12.0
  response:
    body:
      string: ''
    headers:
      dataserviceid:
      - https://batche2690d64.westcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/enableautoscale
      dataserviceversion:
      - '3.0'
      date:
      - Tue, 24 Nov 2020 02:08:22 GMT
      etag:
      - '0x8D8901DD102EBC9'
      last-modified:
      - Tue, 24 Nov 2020 02:08:20 GMT
      request-id:
      - 495349f2-798a-442b-a114-a10d846a1185
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"autoScaleFormula": "$TargetDedicatedNodes=3"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '47'
      Content-Type:
      - application/json; odata=minimalmetadata; charset=utf-8
      User-Agent:
      - python/3.8.5 (macOS-10.15.7-x86_64-i386-64bit) msrest/0.6.19 msrest_azure/0.6.4
        azure-batch/9.0.1 Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Tue, 24 Nov 2020 02:08:23 GMT
    method: POST
    uri: https://batch.westcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/evaluateautoscale?api-version=2020-09-01.12.0
  response:
    body:
      string: "{\r\n  \"odata.metadata\":\"https://batch.westcentralus.batch.azure.com/$metadata#Microsoft.Azure.Batch.Protocol.Entities.AutoScaleRun\"\
        ,\"timestamp\":\"2020-11-24T02:08:23.1092298Z\",\"results\":\"$TargetDedicatedNodes=3;$TargetLowPriorityNodes=0;$NodeDeallocationOption=requeue\"\
        \r\n}"
    headers:
      content-type:
      - application/json;odata=minimalmetadata
      dataserviceid:
      - https://batche2690d64.westcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/evaluateautoscale
      dataserviceversion:
      - '3.0'
      date:
      - Tue, 24 Nov 2020 02:08:22 GMT
      request-id:
      - c0d15f4f-b953-4fa4-8b29-d6591ff0dd4e
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - python/3.8.5 (macOS-10.15.7-x86_64-i386-64bit) msrest/0.6.19 msrest_azure/0.6.4
        azure-batch/9.0.1 Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Tue, 24 Nov 2020 02:08:23 GMT
    method: POST
    uri: https://batch.westcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/disableautoscale?api-version=2020-09-01.12.0
  response:
    body:
      string: ''
    headers:
      dataserviceid:
      - https://batche2690d64.westcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/disableautoscale
      dataserviceversion:
      - '3.0'
      date:
      - Tue, 24 Nov 2020 02:08:22 GMT
      etag:
      - '0x8D8901DD26EE675'
      last-modified:
      - Tue, 24 Nov 2020 02:08:23 GMT
      request-id:
      - 98c97d7a-5a24-4d8c-ae82-c2f99221175a
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python/3.8.5 (macOS-10.15.7-x86_64-i386-64bit) msrest/0.6.19 msrest_azure/0.6.4
        azure-batch/9.0.1 Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Tue, 24 Nov 2020 02:08:23 GMT
    method: GET
    uri: https://batch.westcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64?api-version=2020-09-01.12.0
  response:
    body:
      string: "{\r\n  \"odata.metadata\":\"https://batch.westcentralus.batch.azure.com/$metadata#pools/@Element\"\
        ,\"id\":\"test_batch_test_batch_scale_poolse2690d64\",\"displayName\":\"test_pool\"\
        ,\"url\":\"https://batch.westcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64\"\
        ,\"eTag\":\"0x8D8901DD26EE675\",\"lastModified\":\"2020-11-24T02:08:23.1859829Z\"\
        ,\"creationTime\":\"2020-11-24T02:08:20.8006089Z\",\"state\":\"active\",\"\
        stateTransitionTime\":\"2020-11-24T02:08:20.8006089Z\",\"allocationState\"\
        :\"steady\",\"allocationStateTransitionTime\":\"2020-11-24T02:08:23.209983Z\"\
        ,\"vmSize\":\"standard_a1\",\"resizeTimeout\":\"PT15M\",\"currentDedicatedNodes\"\
        :0,\"targetDedicatedNodes\":0,\"currentLowPriorityNodes\":0,\"targetLowPriorityNodes\"\
        :0,\"enableAutoScale\":false,\"enableInterNodeCommunication\":false,\"userAccounts\"\
        :[\r\n    {\r\n      \"name\":\"task-user\",\"elevationLevel\":\"admin\"\r\
        \n    }\r\n  ],\"taskSlotsPerNode\":1,\"taskSchedulingPolicy\":{\r\n    \"\
        nodeFillType\":\"Spread\"\r\n  },\"virtualMachineConfiguration\":{\r\n   \
        \ \"imageReference\":{\r\n      \"publisher\":\"Canonical\",\"offer\":\"UbuntuServer\"\
        ,\"sku\":\"16.04-LTS\",\"version\":\"latest\"\r\n    },\"nodeAgentSKUId\"\
        :\"batch.node.ubuntu 16.04\"\r\n  }\r\n}"
    headers:
      content-type:
      - application/json;odata=minimalmetadata
      dataserviceversion:
      - '3.0'
      date:
      - Tue, 24 Nov 2020 02:08:22 GMT
      etag:
      - '0x8D8901DD26EE675'
      last-modified:
      - Tue, 24 Nov 2020 02:08:23 GMT
      request-id:
      - 5e3a8676-03c4-4825-9595-0339079f9279
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"targetDedicatedNodes": 0, "targetLowPriorityNodes": 2}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '56'
      Content-Type:
      - application/json; odata=minimalmetadata; charset=utf-8
      User-Agent:
      - python/3.8.5 (macOS-10.15.7-x86_64-i386-64bit) msrest/0.6.19 msrest_azure/0.6.4
        azure-batch/9.0.1 Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Tue, 24 Nov 2020 02:08:23 GMT
    method: POST
    uri: https://batch.westcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/resize?api-version=2020-09-01.12.0
  response:
    body:
      string: ''
    headers:
      dataserviceid:
      - https://batche2690d64.westcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/resize
      dataserviceversion:
      - '3.0'
      date:
      - Tue, 24 Nov 2020 02:08:23 GMT
      etag:
      - '0x8D8901DD28CA813'
      last-modified:
      - Tue, 24 Nov 2020 02:08:23 GMT
      request-id:
      - 4f03e22a-d037-4ef3-bd57-e0d54dbbfba8
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - python/3.8.5 (macOS-10.15.7-x86_64-i386-64bit) msrest/0.6.19 msrest_azure/0.6.4
        azure-batch/9.0.1 Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Tue, 24 Nov 2020 02:08:23 GMT
    method: POST
    uri: https://batch.westcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/stopresize?api-version=2020-09-01.12.0
  response:
    body:
      string: ''
    headers:
      dataserviceid:
      - https://batche2690d64.westcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64/stopresize
      dataserviceversion:
      - '3.0'
      date:
      - Tue, 24 Nov 2020 02:08:23 GMT
      etag:
      - '0x8D8901DD28CA813'
      last-modified:
      - Tue, 24 Nov 2020 02:08:23 GMT
      request-id:
      - e6abe20e-cc4b-4f63-a47f-0077ce619d34
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python/3.8.5 (macOS-10.15.7-x86_64-i386-64bit) msrest/0.6.19 msrest_azure/0.6.4
        azure-batch/9.0.1 Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Tue, 24 Nov 2020 02:08:23 GMT
    method: GET
    uri: https://batch.westcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64?api-version=2020-09-01.12.0
  response:
    body:
      string: "{\r\n  \"odata.metadata\":\"https://batch.westcentralus.batch.azure.com/$metadata#pools/@Element\"\
        ,\"id\":\"test_batch_test_batch_scale_poolse2690d64\",\"displayName\":\"test_pool\"\
        ,\"url\":\"https://batch.westcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64\"\
        ,\"eTag\":\"0x8D8901DD28CA813\",\"lastModified\":\"2020-11-24T02:08:23.3809939Z\"\
        ,\"creationTime\":\"2020-11-24T02:08:20.8006089Z\",\"state\":\"active\",\"\
        stateTransitionTime\":\"2020-11-24T02:08:20.8006089Z\",\"allocationState\"\
        :\"stopping\",\"allocationStateTransitionTime\":\"2020-11-24T02:08:23.4879986Z\"\
        ,\"vmSize\":\"standard_a1\",\"resizeTimeout\":\"PT15M\",\"currentDedicatedNodes\"\
        :0,\"targetDedicatedNodes\":0,\"currentLowPriorityNodes\":0,\"targetLowPriorityNodes\"\
        :2,\"enableAutoScale\":false,\"enableInterNodeCommunication\":false,\"userAccounts\"\
        :[\r\n    {\r\n      \"name\":\"task-user\",\"elevationLevel\":\"admin\"\r\
        \n    }\r\n  ],\"taskSlotsPerNode\":1,\"taskSchedulingPolicy\":{\r\n    \"\
        nodeFillType\":\"Spread\"\r\n  },\"virtualMachineConfiguration\":{\r\n   \
        \ \"imageReference\":{\r\n      \"publisher\":\"Canonical\",\"offer\":\"UbuntuServer\"\
        ,\"sku\":\"16.04-LTS\",\"version\":\"latest\"\r\n    },\"nodeAgentSKUId\"\
        :\"batch.node.ubuntu 16.04\"\r\n  }\r\n}"
    headers:
      content-type:
      - application/json;odata=minimalmetadata
      dataserviceversion:
      - '3.0'
      date:
      - Tue, 24 Nov 2020 02:08:23 GMT
      etag:
      - '0x8D8901DD28CA813'
      last-modified:
      - Tue, 24 Nov 2020 02:08:23 GMT
      request-id:
      - 91ba745b-6a5f-43fa-9fda-20d627c7cf4a
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python/3.8.5 (macOS-10.15.7-x86_64-i386-64bit) msrest/0.6.19 msrest_azure/0.6.4
        azure-batch/9.0.1 Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Tue, 24 Nov 2020 02:08:28 GMT
    method: GET
    uri: https://batch.westcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64?api-version=2020-09-01.12.0
  response:
    body:
      string: "{\r\n  \"odata.metadata\":\"https://batch.westcentralus.batch.azure.com/$metadata#pools/@Element\"\
        ,\"id\":\"test_batch_test_batch_scale_poolse2690d64\",\"displayName\":\"test_pool\"\
        ,\"url\":\"https://batch.westcentralus.batch.azure.com/pools/test_batch_test_batch_scale_poolse2690d64\"\
        ,\"eTag\":\"0x8D8901DD28CA813\",\"lastModified\":\"2020-11-24T02:08:23.3809939Z\"\
        ,\"creationTime\":\"2020-11-24T02:08:20.8006089Z\",\"state\":\"active\",\"\
        stateTransitionTime\":\"2020-11-24T02:08:20.8006089Z\",\"allocationState\"\
        :\"steady\",\"allocationStateTransitionTime\":\"2020-11-24T02:08:23.6122185Z\"\
        ,\"vmSize\":\"standard_a1\",\"resizeTimeout\":\"PT15M\",\"currentDedicatedNodes\"\
        :0,\"targetDedicatedNodes\":0,\"currentLowPriorityNodes\":0,\"targetLowPriorityNodes\"\
        :2,\"resizeErrors\":[\r\n    {\r\n      \"code\":\"ResizeStopped\",\"message\"\
        :\"Desired number of low priority nodes could not be allocated due to a stop\
        \ resize operation\"\r\n    }\r\n  ],\"enableAutoScale\":false,\"enableInterNodeCommunication\"\
        :false,\"userAccounts\":[\r\n    {\r\n      \"name\":\"task-user\",\"elevationLevel\"\
        :\"admin\"\r\n    }\r\n  ],\"taskSlotsPerNode\":1,\"taskSchedulingPolicy\"\
        :{\r\n    \"nodeFillType\":\"Spread\"\r\n  },\"virtualMachineConfiguration\"\
        :{\r\n    \"imageReference\":{\r\n      \"publisher\":\"Canonical\",\"offer\"\
        :\"UbuntuServer\",\"sku\":\"16.04-LTS\",\"version\":\"latest\"\r\n    },\"\
        nodeAgentSKUId\":\"batch.node.ubuntu 16.04\"\r\n  }\r\n}"
    headers:
      content-type:
      - application/json;odata=minimalmetadata
      dataserviceversion:
      - '3.0'
      date:
      - Tue, 24 Nov 2020 02:08:28 GMT
      etag:
      - '0x8D8901DD28CA813'
      last-modified:
      - Tue, 24 Nov 2020 02:08:23 GMT
      request-id:
      - c787c060-8025-4cb4-b387-24187164afb3
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python/3.8.5 (macOS-10.15.7-x86_64-i386-64bit) msrest/0.6.19 msrest_azure/0.6.4
        azure-batch/9.0.1 Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Tue, 24 Nov 2020 02:08:28 GMT
    method: GET
    uri: https://batch.westcentralus.batch.azure.com/lifetimepoolstats?api-version=2020-09-01.12.0
  response:
    body:
      string: "{\r\n  \"odata.metadata\":\"https://batch.westcentralus.batch.azure.com/$metadata#poolstats/@Element\"\
        ,\"url\":\"https://batch.westcentralus.batch.azure.com/lifetimepoolstats\"\
        ,\"usageStats\":{\r\n    \"startTime\":\"2020-11-24T02:08:03.4582204Z\",\"\
        lastUpdateTime\":\"2020-11-24T02:08:03.4582204Z\",\"dedicatedCoreTime\":\"\
        PT0S\"\r\n  },\"resourceStats\":{\r\n    \"startTime\":\"2020-11-24T02:08:03.4582204Z\"\
        ,\"diskReadIOps\":\"0\",\"diskWriteIOps\":\"0\",\"lastUpdateTime\":\"2020-11-24T02:08:03.4582204Z\"\
        ,\"avgCPUPercentage\":0.0,\"avgMemoryGiB\":0.0,\"peakMemoryGiB\":0.0,\"avgDiskGiB\"\
        :0.0,\"peakDiskGiB\":0.0,\"diskReadGiB\":0.0,\"diskWriteGiB\":0.0,\"networkReadGiB\"\
        :0.0,\"networkWriteGiB\":0.0\r\n  }\r\n}"
    headers:
      content-type:
      - application/json;odata=minimalmetadata
      dataserviceversion:
      - '3.0'
      date:
      - Tue, 24 Nov 2020 02:08:28 GMT
      request-id:
      - 9eca81b6-8920-476c-91cb-1ffa9b38b10b
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python/3.8.5 (macOS-10.15.7-x86_64-i386-64bit) msrest/0.6.19 msrest_azure/0.6.4
        azure-batch/9.0.1 Azure-SDK-For-Python
      accept-language:
      - en-US
      ocp-date:
      - Tue, 24 Nov 2020 02:08:29 GMT
    method: GET
    uri: https://batch.westcentralus.batch.azure.com/poolusagemetrics?api-version=2020-09-01.12.0
  response:
    body:
      string: "{\r\n  \"odata.metadata\":\"https://batch.westcentralus.batch.azure.com/$metadata#poolusagemetrics\"\
        ,\"value\":[\r\n    \r\n  ]\r\n}"
    headers:
      content-type:
      - application/json;odata=minimalmetadata
      dataserviceversion:
      - '3.0'
      date:
      - Tue, 24 Nov 2020 02:08:28 GMT
      request-id:
      - 04d52607-226a-4f5e-a21a-c6ff871cecbb
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
version: 1
