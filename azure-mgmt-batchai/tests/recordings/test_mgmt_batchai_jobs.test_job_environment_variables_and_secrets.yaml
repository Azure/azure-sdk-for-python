interactions:
- request:
    body: 'b''b\''b\\\''{"location": "westeurope", "properties": {"priority": 0, "cluster":
      {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/providers/Microsoft.BatchAI/clusters/cluster6e5e1aab"},
      "nodeCount": 1, "customToolkitSettings": {"commandLine": "echo $VARIABLE $SECRET_VARIABLE"},
      "jobPreparation": {"commandLine": "echo $VARIABLE $SECRET_VARIABLE"}, "stdOutErrPathPrefix":
      "$AZ_BATCHAI_MOUNT_ROOT/azfiles", "environmentVariables": [{"name": "VARIABLE",
      "value": "VALUE"}], "secrets": [{"name": "SECRET_VARIABLE", "value": "SECRET"}]}}\\\''\'''''
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Length: ['620']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.4 (Linux-4.15.6-300.fc27.x86_64-x86_64-with-fedora-27-Twenty_Seven)
          requests/2.18.4 msrest/0.4.27 msrest_azure/0.4.22 azure-mgmt-batchai/1.0.0
          Azure-SDK-For-Python]
      accept-language: [en-US]
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/providers/Microsoft.BatchAI/jobs/job?api-version=2018-03-01
  response:
    body: {string: ''}
    headers:
      azure-asyncoperation: ['https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.BatchAI/locations/westeurope/operationresults/6e6f84d6-e33b-43fd-bdb8-dda1c964f33a?api-version=2018-03-01']
      cache-control: [no-cache]
      content-length: ['0']
      date: ['Fri, 16 Mar 2018 05:15:43 GMT']
      expires: ['-1']
      location: ['https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.BatchAI/locations/westeurope/operationstatuses/6e6f84d6-e33b-43fd-bdb8-dda1c964f33a?api-version=2018-03-01']
      pragma: [no-cache]
      request-id: [c9308964-5427-4e6b-914f-12d13868cbdd]
      server: [Microsoft-HTTPAPI/2.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-content-type-options: [nosniff]
      x-ms-ratelimit-remaining-subscription-writes: ['1198']
    status: {code: 202, message: Accepted}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      User-Agent: [python/3.6.4 (Linux-4.15.6-300.fc27.x86_64-x86_64-with-fedora-27-Twenty_Seven)
          requests/2.18.4 msrest/0.4.27 msrest_azure/0.4.22 azure-mgmt-batchai/1.0.0
          Azure-SDK-For-Python]
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.BatchAI/locations/westeurope/operationresults/6e6f84d6-e33b-43fd-bdb8-dda1c964f33a?api-version=2018-03-01
  response:
    body: {string: '{"id":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.BatchAI/locations/westeurope/operationresults/6e6f84d6-e33b-43fd-bdb8-dda1c964f33a","name":"6e6f84d6-e33b-43fd-bdb8-dda1c964f33a","status":"Succeeded","startTime":"2018-03-16T05:15:43.619Z","endTime":"2018-03-16T05:15:45.026Z","properties":{"resourceId":"00000000-0000-0000-0000-000000000000$test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab$job"}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['479']
      content-type: [application/json; charset=utf-8]
      date: ['Fri, 16 Mar 2018 05:16:00 GMT']
      expires: ['-1']
      pragma: [no-cache]
      request-id: [bb731b9a-6bfc-475e-9f5f-90661047b685]
      server: [Microsoft-HTTPAPI/2.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      User-Agent: [python/3.6.4 (Linux-4.15.6-300.fc27.x86_64-x86_64-with-fedora-27-Twenty_Seven)
          requests/2.18.4 msrest/0.4.27 msrest_azure/0.4.22 azure-mgmt-batchai/1.0.0
          Azure-SDK-For-Python]
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/providers/Microsoft.BatchAI/jobs/job?api-version=2018-03-01
  response:
    body: {string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/providers/Microsoft.BatchAI/jobs/job","name":"job","type":"Microsoft.BatchAI/Jobs","properties":{"priority":0,"cluster":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/providers/Microsoft.BatchAI/clusters/cluster6e5e1aab"},"jobOutputDirectoryPathSegment":"00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/jobs/job/949a27fb-fd45-4ad7-829f-13ee6d8e1597","nodeCount":1,"toolType":"custom","customToolkitSettings":{"commandLine":"echo
        $VARIABLE $SECRET_VARIABLE"},"jobPreparation":{"commandLine":"echo $VARIABLE
        $SECRET_VARIABLE"},"stdOutErrPathPrefix":"$AZ_BATCHAI_MOUNT_ROOT/azfiles","environmentVariables":[{"name":"VARIABLE","value":"VALUE"}],"secrets":[{"name":"SECRET_VARIABLE"}],"constraints":{"maxWallClockTime":"P7D"},"creationTime":"2018-03-16T05:15:43.619Z","provisioningState":"succeeded","provisioningStateTransitionTime":"2018-03-16T05:15:45.01Z","executionState":"succeeded","executionStateTransitionTime":"2018-03-16T05:15:47.826Z","executionInfo":{"startTime":"2018-03-16T05:15:45.281Z","endTime":"2018-03-16T05:15:47.826Z","exitCode":0}}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1362']
      content-type: [application/json; charset=utf-8]
      date: ['Fri, 16 Mar 2018 05:16:01 GMT']
      etag: ['"0x8D58AFCF7C6FF40"']
      expires: ['-1']
      last-modified: ['Fri, 16 Mar 2018 05:15:43 GMT']
      pragma: [no-cache]
      request-id: [661345d9-892c-4ced-9c8d-20a052dc8123]
      server: [Microsoft-HTTPAPI/2.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.4 (Linux-4.15.6-300.fc27.x86_64-x86_64-with-fedora-27-Twenty_Seven)
          requests/2.18.4 msrest/0.4.27 msrest_azure/0.4.22 azure-mgmt-batchai/1.0.0
          Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/providers/Microsoft.BatchAI/jobs/job?api-version=2018-03-01
  response:
    body: {string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/providers/Microsoft.BatchAI/jobs/job","name":"job","type":"Microsoft.BatchAI/Jobs","properties":{"priority":0,"cluster":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/providers/Microsoft.BatchAI/clusters/cluster6e5e1aab"},"jobOutputDirectoryPathSegment":"00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/jobs/job/949a27fb-fd45-4ad7-829f-13ee6d8e1597","nodeCount":1,"toolType":"custom","customToolkitSettings":{"commandLine":"echo
        $VARIABLE $SECRET_VARIABLE"},"jobPreparation":{"commandLine":"echo $VARIABLE
        $SECRET_VARIABLE"},"stdOutErrPathPrefix":"$AZ_BATCHAI_MOUNT_ROOT/azfiles","environmentVariables":[{"name":"VARIABLE","value":"VALUE"}],"secrets":[{"name":"SECRET_VARIABLE"}],"constraints":{"maxWallClockTime":"P7D"},"creationTime":"2018-03-16T05:15:43.619Z","provisioningState":"succeeded","provisioningStateTransitionTime":"2018-03-16T05:15:45.01Z","executionState":"succeeded","executionStateTransitionTime":"2018-03-16T05:15:47.826Z","executionInfo":{"startTime":"2018-03-16T05:15:45.281Z","endTime":"2018-03-16T05:15:47.826Z","exitCode":0}}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1362']
      content-type: [application/json; charset=utf-8]
      date: ['Fri, 16 Mar 2018 05:16:02 GMT']
      etag: ['"0x8D58AFCF7C6FF40"']
      expires: ['-1']
      last-modified: ['Fri, 16 Mar 2018 05:15:43 GMT']
      pragma: [no-cache]
      request-id: [eb6ae570-4aa3-41ff-bd55-d593c1042bd5]
      server: [Microsoft-HTTPAPI/2.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.4 (Linux-4.15.6-300.fc27.x86_64-x86_64-with-fedora-27-Twenty_Seven)
          requests/2.18.4 msrest/0.4.27 msrest_azure/0.4.22 azure-mgmt-batchai/1.0.0
          Azure-SDK-For-Python]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/providers/Microsoft.BatchAI/jobs/job/listOutputFiles?api-version=2018-03-01&outputdirectoryid=stdouterr&directory=.&linkexpiryinminutes=60&maxresults=1000
  response:
    body: {string: '{"value":[{"name":"execution.log","isDirectory":false,"downloadUrl":"https://psdk6e5e1aab.file.core.windows.net/share/00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/jobs/job/949a27fb-fd45-4ad7-829f-13ee6d8e1597/stdouterr/execution.log?sv=2016-05-31&sr=f&sig=Vv0V0V22bVLCYd8qYOO%2Bmv8RtTHag8OtzK%2Bo2WAaoAM%3D&se=2018-03-16T06%3A16%3A04Z&sp=rl","properties":{"lastModified":"2018-03-16T05:15:47Z","contentLength":181}},{"name":"stderr-job_prep.txt","isDirectory":false,"downloadUrl":"https://psdk6e5e1aab.file.core.windows.net/share/00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/jobs/job/949a27fb-fd45-4ad7-829f-13ee6d8e1597/stdouterr/stderr-job_prep.txt?sv=2016-05-31&sr=f&sig=65JgNQQiwl4nDjUFBvELX621Hi%2Bhh19fEDXca%2FSoeiI%3D&se=2018-03-16T06%3A16%3A04Z&sp=rl","properties":{"lastModified":"2018-03-16T05:15:47Z","contentLength":0}},{"name":"stderr.txt","isDirectory":false,"downloadUrl":"https://psdk6e5e1aab.file.core.windows.net/share/00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/jobs/job/949a27fb-fd45-4ad7-829f-13ee6d8e1597/stdouterr/stderr.txt?sv=2016-05-31&sr=f&sig=349%2FL5nImMqTpMxZuAaXKZhc5M%2Fn%2BGoYrMIRLhQXUoY%3D&se=2018-03-16T06%3A16%3A04Z&sp=rl","properties":{"lastModified":"2018-03-16T05:15:47Z","contentLength":0}},{"name":"stdout-job_prep.txt","isDirectory":false,"downloadUrl":"https://psdk6e5e1aab.file.core.windows.net/share/00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/jobs/job/949a27fb-fd45-4ad7-829f-13ee6d8e1597/stdouterr/stdout-job_prep.txt?sv=2016-05-31&sr=f&sig=e5peBuoBEnZC8EbPXyPKwYwVzwZy94AnjAMWa04b43U%3D&se=2018-03-16T06%3A16%3A04Z&sp=rl","properties":{"lastModified":"2018-03-16T05:15:47Z","contentLength":13}},{"name":"stdout.txt","isDirectory":false,"downloadUrl":"https://psdk6e5e1aab.file.core.windows.net/share/00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/jobs/job/949a27fb-fd45-4ad7-829f-13ee6d8e1597/stdouterr/stdout.txt?sv=2016-05-31&sr=f&sig=fm0rrhUz68dIFYqrxWu4bmJLlaTa%2F5sB6CqyvvJv4zI%3D&se=2018-03-16T06%3A16%3A04Z&sp=rl","properties":{"lastModified":"2018-03-16T05:15:47Z","contentLength":13}}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['2373']
      content-type: [application/json; charset=utf-8]
      date: ['Fri, 16 Mar 2018 05:16:04 GMT']
      expires: ['-1']
      pragma: [no-cache]
      request-id: [02a811de-5cb9-4058-8981-3f52198e7a12]
      server: [Microsoft-HTTPAPI/2.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: ['*/*']
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      User-Agent: [python-requests/2.18.4]
    method: GET
    uri: https://psdk6e5e1aab.file.core.windows.net/share/00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/jobs/job/949a27fb-fd45-4ad7-829f-13ee6d8e1597/stdouterr/stderr-job_prep.txt?sv=2016-05-31&sr=f&sig=65JgNQQiwl4nDjUFBvELX621Hi%2Bhh19fEDXca%2FSoeiI%3D&se=2018-03-16T06%3A16%3A04Z&sp=rl
  response:
    body: {string: ''}
    headers:
      accept-ranges: [bytes]
      content-length: ['0']
      content-type: [application/octet-stream]
      date: ['Fri, 16 Mar 2018 05:16:05 GMT']
      etag: ['"0x8D58AFCF9D03940"']
      last-modified: ['Fri, 16 Mar 2018 05:15:47 GMT']
      server: [Windows-Azure-File/1.0 Microsoft-HTTPAPI/2.0]
      x-ms-type: [File]
      x-ms-version: ['2016-05-31']
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: ['*/*']
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      User-Agent: [python-requests/2.18.4]
    method: GET
    uri: https://psdk6e5e1aab.file.core.windows.net/share/00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/jobs/job/949a27fb-fd45-4ad7-829f-13ee6d8e1597/stdouterr/stderr.txt?sv=2016-05-31&sr=f&sig=349%2FL5nImMqTpMxZuAaXKZhc5M%2Fn%2BGoYrMIRLhQXUoY%3D&se=2018-03-16T06%3A16%3A04Z&sp=rl
  response:
    body: {string: ''}
    headers:
      accept-ranges: [bytes]
      content-length: ['0']
      content-type: [application/octet-stream]
      date: ['Fri, 16 Mar 2018 05:16:07 GMT']
      etag: ['"0x8D58AFCF9F2B54E"']
      last-modified: ['Fri, 16 Mar 2018 05:15:47 GMT']
      server: [Windows-Azure-File/1.0 Microsoft-HTTPAPI/2.0]
      x-ms-type: [File]
      x-ms-version: ['2016-05-31']
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: ['*/*']
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      User-Agent: [python-requests/2.18.4]
    method: GET
    uri: https://psdk6e5e1aab.file.core.windows.net/share/00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/jobs/job/949a27fb-fd45-4ad7-829f-13ee6d8e1597/stdouterr/stdout-job_prep.txt?sv=2016-05-31&sr=f&sig=e5peBuoBEnZC8EbPXyPKwYwVzwZy94AnjAMWa04b43U%3D&se=2018-03-16T06%3A16%3A04Z&sp=rl
  response:
    body: {string: 'VALUE SECRET

        '}
    headers:
      accept-ranges: [bytes]
      content-length: ['13']
      content-type: [application/octet-stream]
      date: ['Fri, 16 Mar 2018 05:16:08 GMT']
      etag: ['"0x8D58AFCF9DCBC2E"']
      last-modified: ['Fri, 16 Mar 2018 05:15:47 GMT']
      server: [Windows-Azure-File/1.0 Microsoft-HTTPAPI/2.0]
      x-ms-type: [File]
      x-ms-version: ['2016-05-31']
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: ['*/*']
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      User-Agent: [python-requests/2.18.4]
    method: GET
    uri: https://psdk6e5e1aab.file.core.windows.net/share/00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/jobs/job/949a27fb-fd45-4ad7-829f-13ee6d8e1597/stdouterr/stdout.txt?sv=2016-05-31&sr=f&sig=fm0rrhUz68dIFYqrxWu4bmJLlaTa%2F5sB6CqyvvJv4zI%3D&se=2018-03-16T06%3A16%3A04Z&sp=rl
  response:
    body: {string: 'VALUE SECRET

        '}
    headers:
      accept-ranges: [bytes]
      content-length: ['13']
      content-type: [application/octet-stream]
      date: ['Fri, 16 Mar 2018 05:16:09 GMT']
      etag: ['"0x8D58AFCF9F9450E"']
      last-modified: ['Fri, 16 Mar 2018 05:15:47 GMT']
      server: [Windows-Azure-File/1.0 Microsoft-HTTPAPI/2.0]
      x-ms-type: [File]
      x-ms-version: ['2016-05-31']
    status: {code: 200, message: OK}
version: 1
