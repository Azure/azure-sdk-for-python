interactions:
- request:
    body: 'b''{"properties": {"schedulingPriority": "normal", "cluster": {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/providers/Microsoft.BatchAI/workspaces/workspace/clusters/cluster6e5e1aab"},
      "nodeCount": 1, "customToolkitSettings": {"commandLine": "echo $VARIABLE $SECRET_VARIABLE"},
      "jobPreparation": {"commandLine": "echo $VARIABLE $SECRET_VARIABLE"}, "stdOutErrPathPrefix":
      "$AZ_BATCHAI_MOUNT_ROOT/azfiles", "environmentVariables": [{"name": "VARIABLE",
      "value": "VALUE"}], "secrets": [{"name": "SECRET_VARIABLE", "value": "SECRET"}]}}'''
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Length: ['632']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Linux-4.16.12-300.fc28.x86_64-x86_64-with-fedora-28-Twenty_Eight)
          requests/2.18.4 msrest/0.4.29 msrest_azure/0.4.31 azure-mgmt-batchai/1.0.1
          Azure-SDK-For-Python]
      accept-language: [en-US]
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/providers/Microsoft.BatchAI/workspaces/workspace/experiments/experiment/jobs/job?api-version=2018-05-01
  response:
    body: {string: ''}
    headers:
      azure-asyncoperation: ['https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.BatchAI/locations/northeurope/operationresults/8102a823-ab71-49dc-a47e-3242823743ae?api-version=2018-05-01']
      cache-control: [no-cache]
      content-length: ['0']
      date: ['Wed, 06 Jun 2018 20:56:34 GMT']
      expires: ['-1']
      location: ['https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.BatchAI/locations/northeurope/operationstatuses/8102a823-ab71-49dc-a47e-3242823743ae?api-version=2018-05-01']
      pragma: [no-cache]
      request-id: [c222ef20-6d9b-417e-8381-c3a56e2a009b]
      server: [Microsoft-HTTPAPI/2.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-content-type-options: [nosniff]
      x-ms-ratelimit-remaining-subscription-writes: ['1197']
    status: {code: 202, message: Accepted}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      User-Agent: [python/3.6.5 (Linux-4.16.12-300.fc28.x86_64-x86_64-with-fedora-28-Twenty_Eight)
          requests/2.18.4 msrest/0.4.29 msrest_azure/0.4.31 azure-mgmt-batchai/1.0.1
          Azure-SDK-For-Python]
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.BatchAI/locations/northeurope/operationresults/8102a823-ab71-49dc-a47e-3242823743ae?api-version=2018-05-01
  response:
    body: {string: '{"id":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.BatchAI/locations/northeurope/operationresults/8102a823-ab71-49dc-a47e-3242823743ae","name":"8102a823-ab71-49dc-a47e-3242823743ae","status":"Succeeded","startTime":"2018-06-06T20:56:34.694Z","endTime":"2018-06-06T20:56:35.402Z","properties":{"resourceId":"00000000-0000-0000-0000-000000000000$test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab$workspace$experiment$job"}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['501']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 06 Jun 2018 20:56:50 GMT']
      expires: ['-1']
      pragma: [no-cache]
      request-id: [d8c0abdb-b48c-423e-ab5c-8ab06f641df4]
      server: [Microsoft-HTTPAPI/2.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      User-Agent: [python/3.6.5 (Linux-4.16.12-300.fc28.x86_64-x86_64-with-fedora-28-Twenty_Eight)
          requests/2.18.4 msrest/0.4.29 msrest_azure/0.4.31 azure-mgmt-batchai/1.0.1
          Azure-SDK-For-Python]
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/providers/Microsoft.BatchAI/workspaces/workspace/experiments/experiment/jobs/job?api-version=2018-05-01
  response:
    body: {string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/providers/Microsoft.BatchAI/workspaces/workspace/experiments/experiment/jobs/job","name":"job","type":"Microsoft.BatchAI/workspaces/experiments/jobs","properties":{"experimentName":"experiment","schedulingPriority":"normal","cluster":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/providers/Microsoft.BatchAI/workspaces/workspace/clusters/cluster6e5e1aab"},"jobOutputDirectoryPathSegment":"00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/workspaces/workspace/experiments/experiment/jobs/job/465a7200-88dd-490e-a4cf-f985e9d83628","nodeCount":1,"toolType":"custom","customToolkitSettings":{"commandLine":"echo
        $VARIABLE $SECRET_VARIABLE"},"jobPreparation":{"commandLine":"echo $VARIABLE
        $SECRET_VARIABLE"},"stdOutErrPathPrefix":"$AZ_BATCHAI_MOUNT_ROOT/azfiles","environmentVariables":[{"name":"VARIABLE","value":"VALUE"}],"secrets":[{"name":"SECRET_VARIABLE"}],"constraints":{"maxWallClockTime":"P7D"},"creationTime":"2018-06-06T20:56:34.679Z","provisioningState":"succeeded","provisioningStateTransitionTime":"2018-06-06T20:56:35.387Z","executionState":"succeeded","executionStateTransitionTime":"2018-06-06T20:56:38.988Z","executionInfo":{"startTime":"2018-06-06T20:56:36.583Z","endTime":"2018-06-06T20:56:38.988Z","exitCode":0}}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1542']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 06 Jun 2018 20:56:52 GMT']
      etag: ['"0x8D5CBEFFD1A8ED6"']
      expires: ['-1']
      last-modified: ['Wed, 06 Jun 2018 20:56:34 GMT']
      pragma: [no-cache]
      request-id: [7fbf760b-ad93-4a21-80f5-c238378c99f9]
      server: [Microsoft-HTTPAPI/2.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Linux-4.16.12-300.fc28.x86_64-x86_64-with-fedora-28-Twenty_Eight)
          requests/2.18.4 msrest/0.4.29 msrest_azure/0.4.31 azure-mgmt-batchai/1.0.1
          Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/providers/Microsoft.BatchAI/workspaces/workspace/experiments/experiment/jobs/job?api-version=2018-05-01
  response:
    body: {string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/providers/Microsoft.BatchAI/workspaces/workspace/experiments/experiment/jobs/job","name":"job","type":"Microsoft.BatchAI/workspaces/experiments/jobs","properties":{"experimentName":"experiment","schedulingPriority":"normal","cluster":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/providers/Microsoft.BatchAI/workspaces/workspace/clusters/cluster6e5e1aab"},"jobOutputDirectoryPathSegment":"00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/workspaces/workspace/experiments/experiment/jobs/job/465a7200-88dd-490e-a4cf-f985e9d83628","nodeCount":1,"toolType":"custom","customToolkitSettings":{"commandLine":"echo
        $VARIABLE $SECRET_VARIABLE"},"jobPreparation":{"commandLine":"echo $VARIABLE
        $SECRET_VARIABLE"},"stdOutErrPathPrefix":"$AZ_BATCHAI_MOUNT_ROOT/azfiles","environmentVariables":[{"name":"VARIABLE","value":"VALUE"}],"secrets":[{"name":"SECRET_VARIABLE"}],"constraints":{"maxWallClockTime":"P7D"},"creationTime":"2018-06-06T20:56:34.679Z","provisioningState":"succeeded","provisioningStateTransitionTime":"2018-06-06T20:56:35.387Z","executionState":"succeeded","executionStateTransitionTime":"2018-06-06T20:56:38.988Z","executionInfo":{"startTime":"2018-06-06T20:56:36.583Z","endTime":"2018-06-06T20:56:38.988Z","exitCode":0}}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1542']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 06 Jun 2018 20:56:52 GMT']
      etag: ['"0x8D5CBEFFD1A8ED6"']
      expires: ['-1']
      last-modified: ['Wed, 06 Jun 2018 20:56:34 GMT']
      pragma: [no-cache]
      request-id: [24ea83cc-13a8-453d-96f4-5e1b6b7c65a2]
      server: [Microsoft-HTTPAPI/2.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Linux-4.16.12-300.fc28.x86_64-x86_64-with-fedora-28-Twenty_Eight)
          requests/2.18.4 msrest/0.4.29 msrest_azure/0.4.31 azure-mgmt-batchai/1.0.1
          Azure-SDK-For-Python]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/providers/Microsoft.BatchAI/workspaces/workspace/experiments/experiment/jobs/job/listOutputFiles?api-version=2018-05-01&outputdirectoryid=stdouterr&directory=.&linkexpiryinminutes=60&maxresults=1000
  response:
    body: {string: '{"value":[{"name":"execution.log","fileType":"file","downloadUrl":"https://psdk6e5e1aab.file.core.windows.net/share/00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/workspaces/workspace/experiments/experiment/jobs/job/465a7200-88dd-490e-a4cf-f985e9d83628/stdouterr/execution.log?sv=2016-05-31&sr=f&sig=RwZkL4ehaUWnwLEV54tijsdyVrfIrQ45WeS0p0LWtuc%3D&se=2018-06-06T21%3A56%3A54Z&sp=rl","properties":{"lastModified":"2018-06-06T20:56:38Z","contentLength":2921}},{"name":"stderr-job_prep.txt","fileType":"file","downloadUrl":"https://psdk6e5e1aab.file.core.windows.net/share/00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/workspaces/workspace/experiments/experiment/jobs/job/465a7200-88dd-490e-a4cf-f985e9d83628/stdouterr/stderr-job_prep.txt?sv=2016-05-31&sr=f&sig=%2BM8Q7idUgWl7tOeQ%2FwG6wJgAbFhv3Rvx26w5QcdR92c%3D&se=2018-06-06T21%3A56%3A54Z&sp=rl","properties":{"lastModified":"2018-06-06T20:56:38Z","contentLength":0}},{"name":"stderr.txt","fileType":"file","downloadUrl":"https://psdk6e5e1aab.file.core.windows.net/share/00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/workspaces/workspace/experiments/experiment/jobs/job/465a7200-88dd-490e-a4cf-f985e9d83628/stdouterr/stderr.txt?sv=2016-05-31&sr=f&sig=I4r9fxHTzXZ3C1db%2F7HdUuZeJEIS5KXCrk0W3NUGGeQ%3D&se=2018-06-06T21%3A56%3A54Z&sp=rl","properties":{"lastModified":"2018-06-06T20:56:38Z","contentLength":0}},{"name":"stdout-job_prep.txt","fileType":"file","downloadUrl":"https://psdk6e5e1aab.file.core.windows.net/share/00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/workspaces/workspace/experiments/experiment/jobs/job/465a7200-88dd-490e-a4cf-f985e9d83628/stdouterr/stdout-job_prep.txt?sv=2016-05-31&sr=f&sig=r%2FDKPuevzJfhbi48iMMF2ye4yJ1TCBvU0zYZMBPLgfo%3D&se=2018-06-06T21%3A56%3A54Z&sp=rl","properties":{"lastModified":"2018-06-06T20:56:38Z","contentLength":13}},{"name":"stdout.txt","fileType":"file","downloadUrl":"https://psdk6e5e1aab.file.core.windows.net/share/00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/workspaces/workspace/experiments/experiment/jobs/job/465a7200-88dd-490e-a4cf-f985e9d83628/stdouterr/stdout.txt?sv=2016-05-31&sr=f&sig=5%2F%2FuvSrWsk6h%2F%2FVzh0coPJdxH%2Fvw4iyR8tYb3y%2BgbrE%3D&se=2018-06-06T21%3A56%3A54Z&sp=rl","properties":{"lastModified":"2018-06-06T20:56:38Z","contentLength":13}}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['2588']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 06 Jun 2018 20:56:54 GMT']
      expires: ['-1']
      pragma: [no-cache]
      request-id: [802440a8-c776-4dd3-bf5a-75d4543acb34]
      server: [Microsoft-HTTPAPI/2.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: ['*/*']
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      User-Agent: [python-requests/2.18.4]
    method: GET
    uri: https://psdk6e5e1aab.file.core.windows.net/share/00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/workspaces/workspace/experiments/experiment/jobs/job/465a7200-88dd-490e-a4cf-f985e9d83628/stdouterr/stderr-job_prep.txt?sv=2016-05-31&sr=f&sig=%2BM8Q7idUgWl7tOeQ%2FwG6wJgAbFhv3Rvx26w5QcdR92c%3D&se=2018-06-06T21%3A56%3A54Z&sp=rl
  response:
    body: {string: ''}
    headers:
      accept-ranges: [bytes]
      content-length: ['0']
      content-type: [application/octet-stream]
      date: ['Wed, 06 Jun 2018 20:56:55 GMT']
      etag: ['"0x8D5CBEFFF298E99"']
      last-modified: ['Wed, 06 Jun 2018 20:56:38 GMT']
      server: [Windows-Azure-File/1.0 Microsoft-HTTPAPI/2.0]
      x-ms-type: [File]
      x-ms-version: ['2016-05-31']
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: ['*/*']
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      User-Agent: [python-requests/2.18.4]
    method: GET
    uri: https://psdk6e5e1aab.file.core.windows.net/share/00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/workspaces/workspace/experiments/experiment/jobs/job/465a7200-88dd-490e-a4cf-f985e9d83628/stdouterr/stderr.txt?sv=2016-05-31&sr=f&sig=I4r9fxHTzXZ3C1db%2F7HdUuZeJEIS5KXCrk0W3NUGGeQ%3D&se=2018-06-06T21%3A56%3A54Z&sp=rl
  response:
    body: {string: ''}
    headers:
      accept-ranges: [bytes]
      content-length: ['0']
      content-type: [application/octet-stream]
      date: ['Wed, 06 Jun 2018 20:56:55 GMT']
      etag: ['"0x8D5CBEFFF739083"']
      last-modified: ['Wed, 06 Jun 2018 20:56:38 GMT']
      server: [Windows-Azure-File/1.0 Microsoft-HTTPAPI/2.0]
      x-ms-type: [File]
      x-ms-version: ['2016-05-31']
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: ['*/*']
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      User-Agent: [python-requests/2.18.4]
    method: GET
    uri: https://psdk6e5e1aab.file.core.windows.net/share/00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/workspaces/workspace/experiments/experiment/jobs/job/465a7200-88dd-490e-a4cf-f985e9d83628/stdouterr/stdout-job_prep.txt?sv=2016-05-31&sr=f&sig=r%2FDKPuevzJfhbi48iMMF2ye4yJ1TCBvU0zYZMBPLgfo%3D&se=2018-06-06T21%3A56%3A54Z&sp=rl
  response:
    body: {string: 'VALUE SECRET

        '}
    headers:
      accept-ranges: [bytes]
      content-length: ['13']
      content-type: [application/octet-stream]
      date: ['Wed, 06 Jun 2018 20:56:56 GMT']
      etag: ['"0x8D5CBEFFF2EE5EF"']
      last-modified: ['Wed, 06 Jun 2018 20:56:38 GMT']
      server: [Windows-Azure-File/1.0 Microsoft-HTTPAPI/2.0]
      x-ms-type: [File]
      x-ms-version: ['2016-05-31']
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: ['*/*']
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      User-Agent: [python-requests/2.18.4]
    method: GET
    uri: https://psdk6e5e1aab.file.core.windows.net/share/00000000-0000-0000-0000-000000000000/test_mgmt_batchai_jobs_test_job_environment_variables_and_secrets6e5e1aab/workspaces/workspace/experiments/experiment/jobs/job/465a7200-88dd-490e-a4cf-f985e9d83628/stdouterr/stdout.txt?sv=2016-05-31&sr=f&sig=5%2F%2FuvSrWsk6h%2F%2FVzh0coPJdxH%2Fvw4iyR8tYb3y%2BgbrE%3D&se=2018-06-06T21%3A56%3A54Z&sp=rl
  response:
    body: {string: 'VALUE SECRET

        '}
    headers:
      accept-ranges: [bytes]
      content-length: ['13']
      content-type: [application/octet-stream]
      date: ['Wed, 06 Jun 2018 20:56:56 GMT']
      etag: ['"0x8D5CBEFFF78C0B9"']
      last-modified: ['Wed, 06 Jun 2018 20:56:38 GMT']
      server: [Windows-Azure-File/1.0 Microsoft-HTTPAPI/2.0]
      x-ms-type: [File]
      x-ms-version: ['2016-05-31']
    status: {code: 200, message: OK}
version: 1
