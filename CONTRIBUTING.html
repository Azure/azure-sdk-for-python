<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Contributing to Azure Python SDK | Azure SDK for Python </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Contributing to Azure Python SDK | Azure SDK for Python ">
    <meta name="generator" content="docfx 2.43.2.0">
    
    <link rel="shortcut icon" href="https://c.s-microsoft.com/favicon.ico?v2">
    <link rel="stylesheet" href="styles/docfx.vendor.css">
    <link rel="stylesheet" href="styles/docfx.css">
    <link rel="stylesheet" href="styles/main.css">
    <meta property="docfx:navrel" content="navtoc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    <meta property="docfx:newtab" content="true">
  
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-62780441-36"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
  
      gtag('config', 'UA-62780441-36');
    </script>
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="index.html">
                <img id="logo" class="svg" src="logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="contributing-to-azure-python-sdk">Contributing to Azure Python SDK</h1>

<p>If you would like to become an active contributor to this project please
follow the instructions provided in <a href="https://opensource.microsoft.com/collaborate/">Microsoft Azure Projects Contribution Guidelines</a>.</p>
<h2 id="generated-code">Generated code</h2>
<p>If you want to contribute to a file that is generated (header contains <code>Code generated by Microsoft (R) AutoRest Code Generator.</code>), the best approach to open a PR on the initial Swagger specification, as we can NOT merge a PR on generated code (it would be replaced by next generation). See <a href="https://github.com/Azure/azure-rest-api-specs/">https://github.com/Azure/azure-rest-api-specs/</a> for details.</p>
<h2 id="tools-overview">Tools Overview</h2>
<p>We utilize a variety of tools to ensure smooth development, testing, and code quality for the Azure Python SDK. Below is a list of key tools and their purpose in the workflow:</p>
<ul>
<li><p>Tox: <a href="https://tox.wiki/en/latest/">Tox</a> is our primary tool for managing test environments. It allows us to distribute tests to virtual environments, install dependencies, and maintain consistency between local and CI builds. Tox is configured to handle various testing scenarios, including linting, type checks, and running unit tests.</p>
</li>
<li><p>Virtualenv: <a href="https://virtualenv.pypa.io/en/latest/">Virtualenv</a> is leveraged by Tox to create isolated environments for each test suite, ensuring consistent dependencies and reducing conflicts.</p>
</li>
<li><p>UV: <a href="https://docs.astral.sh/uv/">UV</a> is a fast package manager that can manage Python versions, run and install Python packages, and be used instead of pip, virtualenv, and more.</p>
</li>
<li><p>Pytest: <a href="https://docs.pytest.org/en/stable/">Pytest</a> is the test framework we use for writing and running our unit tests. It supports fixtures, parameterized tests, and other features that make testing more powerful and flexible.</p>
</li>
<li><p>Pylint: <a href="https://pylint.readthedocs.io/en/stable/">Pylint</a> is used for code linting to enforce coding standards and catch potential issues early. Maintaining a consistent code style is important, and Pylint helps achieve that goal.</p>
</li>
<li><p>Mypy and Pyright: Both tools are used for type checking. <a href="https://mypy.readthedocs.io/en/stable/">Mypy</a> helps verify that type annotations are correct, while <a href="https://github.com/microsoft/pyright">Pyright</a> provides additional support for type completeness and validation.</p>
</li>
<li><p>Sphinx: <a href="https://www.sphinx-doc.org/en/master/">Sphinx</a> is used for generating package documentation. This ensures that contributors and users alike have clear, accessible information about how to use the SDK.</p>
</li>
<li><p>Bandit: <a href="https://bandit.readthedocs.io/en/latest/">Bandit</a> is employed to find common security issues in Python code. It performs static analysis and helps us secure the codebase.</p>
</li>
<li><p>Azure DevOps: Our CI/CD pipelines are managed using <a href="https://azure.microsoft.com/products/devops/">Azure DevOps</a>, ensuring that builds, tests, and deployments are executed consistently and reliably across all contributions.</p>
</li>
</ul>
<h2 id="building-and-testing">Building and Testing</h2>
<p>The Azure SDK team's Python CI leverages the tool <code>tox</code> to distribute tests to virtual environments, handle test dependency installation, and coordinate tooling reporting during PR/CI builds. This means that a dev working locally can reproduce <em>exactly</em> what the build machine is doing.</p>
<p><a href="https://tox.wiki/en/latest/">A Brief Overview of Tox</a></p>
<h4 id="a-monorepo-and-tox-in-harmony">A Monorepo and Tox in Harmony</h4>
<p>Traditionally, the <code>tox.ini</code> file for a package sits <em>alongside the setup.py</em> in source code. The <code>azure-sdk-for-python</code> necessarily does not adhere to this policy. There are over one-hundred packages contained here-in. That's a lot of <code>tox.ini</code> files to maintain!</p>
<p>Instead, the CI system leverages the <code>--root</code> argument which is new to <code>tox4</code>. The <code>--root</code> argument allows <code>tox</code> to act as if the <code>tox.ini</code> is located in whatever directory you specify!</p>
<h4 id="tox-environments">Tox Environments</h4>
<p>A given <code>tox.ini</code> works on the concept of <code>test environments</code>. A given test environment is a combination of:</p>
<ol>
<li>An identifier (or identifiers)</li>
<li>A targeted Python version
<ol>
<li><code>tox</code> will default to base python executing the <code>tox</code> command if no Python environment is specified</li>
</ol>
</li>
<li>(optionally) an OS platform</li>
</ol>
<p>Internally <code>tox</code> leverages <code>virtualenv</code> to create each test environment's virtual environment.</p>
<p>This means that once the <code>tox</code> workflow is in place, all tests will be executed <em>within a virtual environment.</em></p>
<p>You can use the command <code>tox list</code> to list all the environments provided by a <code>tox.ini</code> file. You can either use that command in the
same directory as the file itself, or use the <code>--conf</code> argument to specify the path to it directly.</p>
<p>Sample output of <code>tox list</code>:</p>
<pre><code>sdk-for-python/eng/tox&gt; tox list
default environments:
whl              -&gt; Builds a wheel and runs tests
sdist            -&gt; Builds a source distribution and runs tests

additional environments:
pylint           -&gt; Lints a package with a pinned version of pylint
next-pylint      -&gt; Lints a package with pylint (version 2.15.8)
mypy             -&gt; Typechecks a package with mypy (version 1.9.0)
next-mypy        -&gt; Typechecks a package with the latest version of mypy
pyright          -&gt; Typechecks a package with pyright (version 1.1.287)
next-pyright     -&gt; Typechecks a package with the latest version of static type-checker pyright
verifytypes      -&gt; Verifies the &quot;type completeness&quot; of a package with pyright
whl_no_aio       -&gt; Builds a wheel without aio and runs tests
develop          -&gt; Tests a package
sphinx           -&gt; Builds a package's documentation with sphinx
depends          -&gt; Ensures all modules in a target package can be successfully imported
verifywhl        -&gt; Verify directories included in whl and contents in manifest file
verifysdist      -&gt; Verify directories included in sdist and contents in manifest file. Also ensures that py.typed configuration is correct within the setup.py
devtest          -&gt; Tests a package against dependencies installed from a dev index
latestdependency -&gt; Tests a package against the released, upper-bound versions of its azure dependencies
mindependency    -&gt; Tests a package against the released, lower-bound versions of its azure dependencies
apistub          -&gt; Generate an api stub of a package ( for https://apiview.dev )
bandit           -&gt; Runs bandit, a tool to find common security issues, against a package
samples          -&gt; Runs a package's samples
breaking         -&gt; Runs the breaking changes checker against a package
</code></pre>
<h3 id="example-usage-of-the-common-azure-sdk-for-python-toxini">Example Usage of the common Azure SDK For Python <code>tox.ini</code></h3>
<p>Basic usage of <code>tox</code> within this monorepo is:</p>
<ol>
<li><code>pip install &quot;tox&lt;5&quot;</code></li>
<li>Run <code>tox run -e ENV_NAME -c path/to/tox.ini --root path/to/python_package</code></li>
</ol>
<ul>
<li><strong>Note</strong>: You can use environment variables to provide defaults for tox config values
<ul>
<li>With <code>TOX_CONFIG_FILE</code> set to the absolute path of <code>tox.ini</code>, you can avoid needing <code>-c path/to/tox.ini</code> in your tox invocations</li>
<li>With <code>TOX_ROOT_DIR</code> set to the absolute path to your python package, you can avoid needing <code>--root path/to/python_package</code></li>
</ul>
</li>
</ul>
<p>The common <code>tox.ini</code> location is <code>eng/tox/tox.ini</code> within the repository.</p>
<p>If at any time you want to blow away the tox created virtual environments and start over, simply append <code>-r</code> to any tox invocation!</p>
<h4 id="example-azure-core-mypy">Example <code>azure-core</code> mypy</h4>
<ol>
<li>Run <code>tox run -e mypy -c ./eng/tox/tox.ini --root sdk/core/azure-core</code></li>
</ol>
<h4 id="example-azure-storage-blob-tests">Example <code>azure-storage-blob</code> tests</h4>
<ol start="2">
<li>Execute <code>tox run -c ./eng/tox/tox.ini --root sdk/storage/azure-storage-blob</code></li>
</ol>
<p>Note that we didn't provide an <code>environment</code> argument for this example. Reason here is that the <em>default</em> environment selected by our common <code>tox.ini</code> file is one that runs <code>pytest</code>.</p>
<h4 id="whl-environment"><code>whl</code> environment</h4>
<p>Used for test execution across the spectrum of all the platforms we want to support. Maintained at a <code>platform specific</code> level just in case we run into platform-specific bugs.</p>
<ul>
<li>Installs the wheel, runs tests using the wheel</li>
</ul>
<pre><code>\&gt; tox run -e whl -c &lt;path to tox.ini&gt; --root &lt;path to python package&gt;

</code></pre>
<h4 id="sdist-environment"><code>sdist</code> environment</h4>
<p>Used for the local dev loop.</p>
<ul>
<li>Installs package in editable mode</li>
<li>Runs tests using the editable mode installation, not the wheel</li>
</ul>
<pre><code>
\&gt; tox run -e sdist -c &lt;path to tox.ini&gt; --root &lt;path to python package&gt;

</code></pre>
<h4 id="pylint-environment"><code>pylint</code> environment</h4>
<p>Pylint install and run.</p>
<pre><code>\&gt; tox run -e pylint -c &lt;path to tox.ini&gt; --root &lt;path to python package&gt;
</code></pre>
<h4 id="mypy-environment"><code>mypy</code> environment</h4>
<p>Mypy install and run.</p>
<pre><code>\&gt; tox run -e mypy -c &lt;path to tox.ini&gt; --root &lt;path to python package&gt;
</code></pre>
<h4 id="sphinx-environment"><code>sphinx</code> environment</h4>
<p>Generate sphinx doc for this package.</p>
<pre><code>\&gt; tox run -e sphinx -c &lt;path to tox.ini&gt; --root &lt;path to python package&gt;
</code></pre>
<h3 id="custom-pytest-arguments">Custom Pytest Arguments</h3>
<p><code>tox</code> supports custom arguments, and the defined pytest environments within the common <code>tox.ini</code> also allow these. Essentially, separate the arguments you want passed to <code>pytest</code> by a <code>--</code> in your tox invocation.</p>
<p><a href="https://tox.wiki/en/latest/config.html#substitutions-for-positional-arguments-in-commands">Tox Documentation on Positional Arguments</a></p>
<p><strong>Example: Invoke tox, breaking into the debugger on failure</strong>
<code>tox run -e whl -c &lt;path to tox.ini&gt; --root &lt;path to python package&gt; -- --pdb</code></p>
<h3 id="performance-testing">Performance Testing</h3>
<p>SDK performance testing is supported via the custom <code>perfstress</code> framework. For full details on this framework, and how to write and run tests for an SDK - see the <a href="https://github.com/Azure/azure-sdk-for-python/blob/main/doc/dev/perfstress_tests.md">perfstress tests documentation</a>.</p>
<h3 id="more-reading">More Reading</h3>
<p>We maintain an <a href="https://github.com/Azure/azure-sdk-for-python/blob/main/doc/eng_sys_checks.md">additional document</a> that has a ton of detail as to what is actually <em>happening</em> in these executions.</p>
<h3 id="dev-feed">Dev Feed</h3>
<p>Daily dev build version of Azure sdk packages for python are available and are uploaded to Azure devops feed daily. We have also created a tox environment to test a package against dev built version of dependent packages. Below is the link to Azure devops feed.
<a href="https://dev.azure.com/azure-sdk/public/_packaging?_a=feed&amp;feed=azure-sdk-for-python"><code>https://dev.azure.com/azure-sdk/public/_packaging?_a=feed&amp;feed=azure-sdk-for-python</code></a></p>
<h5 id="to-install-latest-dev-build-version-of-a-package">To install latest dev build version of a package</h5>
<pre><code>pip install &lt;package-name&gt; --extra-index-url https://pkgs.dev.azure.com/azure-sdk/public/_packaging/azure-sdk-for-python/pypi/simple --pre
</code></pre>
<h4 id="to-install-a-specific-dev-build-version-of-a-package">To Install a specific dev build version of a package</h4>
<p>For e.g.</p>
<pre><code>pip install azure-appconfiguration==1.0.0b6.dev20191205001 --extra-index-url https://pkgs.dev.azure.com/azure-sdk/public/_packaging/azure-sdk-for-python/pypi/simple
</code></pre>
<p>To test a package being developed against latest dev build version of dependent packages:
a. cd to package root folder
b. run tox environment devtest</p>
<pre><code>\&gt; tox run -e devtest -c &lt;path to tox.ini&gt; --root &lt;path to python package&gt;
</code></pre>
<p>This tox test( devtest) will fail if installed dependent packages are not dev build version.</p>
<h2 id="samples">Samples</h2>
<h3 id="third-party-dependencies">Third-party dependencies</h3>
<p>Third party libraries should only be included in samples when necessary to demonstrate usage of an Azure SDK package; they should not be suggested or endorsed as alternatives to the Azure SDK.</p>
<p>When code samples take dependencies, readers should be able to use the material without significant license burden or research on terms. This goal requires restricting dependencies to certain types of open source or commercial licenses.</p>
<p>Samples may take the following categories of dependencies:</p>
<ul>
<li><p><strong>Open-source</strong> : Open source offerings that use an <a href="https://opensource.org/licenses">Open Source Initiative (OSI) approved license</a>. Any component whose license isn't OSI-approved is considered a commercial offering. Prefer OSS projects that are members of any of the <a href="https://opensource.microsoft.com/ecosystem/">OSS foundations that Microsoft is part of</a>. Prefer permissive licenses for libraries, like <a href="https://opensource.org/license/MIT">MIT</a> and <a href="https://opensource.org/license/apache-2-0">Apache 2</a>. Copy-left licenses like <a href="https://opensource.org/license/gpl-3-0">GPLv3</a> are acceptable for tools, and OSs. <a href="https://github.com/kubernetes/kubernetes">Kubernetes</a>, <a href="https://github.com/torvalds/linux">Linux</a>, and <a href="https://github.com/JamesNK/Newtonsoft.Json">Newtonsoft.Json</a> are examples of this license type. Links to open source components should be to where the source is hosted, including any applicable license, such as a GitHub repository (or similar).</p>
</li>
<li><p><strong>Commercial</strong>: Commercial offerings that enable readers to learn from our content without unnecessary extra costs. Typically, the offering has some form of a community edition, or a free trial sufficient for its use in content. A commercial license may be a form of dual-license, or tiered license. Links to commercial components should be to the commercial site for the software, even if the source software is hosted publicly on GitHub (or similar).</p>
</li>
<li><p><strong>Dual licensed</strong>: Commercial offerings that enable readers to choose either license based on their needs. For example, if the offering has an OSS and commercial license, readers can  choose between them. <a href="https://github.com/mysql/mysql-server">MySql</a> is an example of this license type.</p>
</li>
<li><p><strong>Tiered licensed</strong>: Offerings that enable readers to use the license tier that corresponds to their characteristics. For example, tiers may be available for students, hobbyists, or companies with defined revenue  thresholds. For offerings with tiered licenses, strive to limit our use in tutorials to the features available in the lowest tier. This policy enables the widest audience for the article. <a href="https://www.docker.com/">Docker</a>, <a href="https://duendesoftware.com/products/identityserver">IdentityServer</a>, <a href="https://sixlabors.com/products/imagesharp/">ImageSharp</a>, and <a href="https://visualstudio.com">Visual Studio</a> are examples of this license type.</p>
</li>
</ul>
<p>In general, we prefer taking dependencies on licensed components in the order of the listed categories. In cases where the category may not be well known, we'll document the category so that readers understand the choice that they're making by using that dependency.</p>
<h2 id="code-of-conduct">Code of Conduct</h2>
<p>This project's code of conduct can be found in the
<a href="https://github.com/Azure/azure-sdk-for-python/blob/main/CODE_OF_CONDUCT.md">CODE_OF_CONDUCT.md file</a>
(v1.4.0 of the <a href="https://contributor-covenant.org/">https://contributor-covenant.org/</a> CoC).</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Azure SDK for Python
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="styles/docfx.js"></script>
    <script type="text/javascript" src="styles/main.js"></script>
  </body>
</html>
