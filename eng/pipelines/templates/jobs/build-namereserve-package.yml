parameters:
  - name: NameForReservation
    type: string
  - name: VersionForReservation
    type: string

jobs:
  - job: generate_namereserve_package
    displayName: Generate Name Reservation Package Artifacts
    pool:
      name: azsdk-pool
      image: windows-2022
      os: windows
    steps:
      - template: /eng/pipelines/templates/steps/install-uv.yml

      - pwsh: |
          uv pip install --system -r eng/ci_tools.txt
        displayName: Install Dependencies

      - pwsh: |
          $ErrorActionPreference = 'Stop'
          $PSNativeCommandUseErrorActionPreference = $true

          generate_namereserve_package `
            --package-version "${{ parameters.VersionForReservation }}" `
            --output-dir "$(Build.ArtifactStagingDirectory)" `
            "${{ parameters.NameForReservation }}"
        displayName: Generate Name Reservation Package

      - template: /eng/common/pipelines/templates/steps/publish-1es-artifact.yml
        parameters:
          ArtifactPath: '$(Build.ArtifactStagingDirectory)'
          ArtifactName: 'NameReservePackage'
