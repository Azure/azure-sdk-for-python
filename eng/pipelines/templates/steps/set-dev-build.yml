parameters:
  BuildTargetingString: 'azure-*'
  ServiceDirectory: ''

steps:
  - template: /eng/pipelines/templates/steps/targeting-string-resolve.yml
    parameters:
      BuildTargetingString: ${{ parameters.BuildTargetingString }}

  - template: /eng/common/pipelines/templates/steps/daily-dev-build-variable.yml
    parameters:
      ServiceDirectory: ${{ parameters.ServiceDirectory }}

  - task: PythonScript@0
    condition: and(succeededOrFailed(), eq(variables['SetDevVersion'],'true'))
    displayName: "Update package versions for dev build"
    inputs:
      scriptPath: 'eng/versioning/version_set_dev.py'
      arguments: '"$(TargetingString)" --service="${{parameters.ServiceDirectory}}" --build-id="$(Build.BuildNumber)"'
