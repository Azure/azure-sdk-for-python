parameters:
  - name: VirtualEnvironmentName
    type: string

steps:
  - pwsh: |
      Write-Host $env:PATH
    displayName: Dump Path Before Activation

  - pwsh: |
      $(Build.SourcesDirectory)/eng/scripts/activate-ci-venv.ps1 `
        -VenvName "${{ parameters.VirtualEnvironmentName }}" `
        -RepoRoot "$(Build.SourcesDirectory)"
    displayName: Use ${{ parameters.VirtualEnvironmentName }} Virtual Environment

  - pwsh: |
      Write-Host $env:PATH
    displayName: Dump Path After Activation

  - script: |
      which python
      python -m pip freeze

      $(Build.SourcesDirectory)/${{ parameters.VirtualEnvironmentName }}/bin/python --version || $(Build.SourcesDirectory)/${{ parameters.VirtualEnvironmentName }}/bin/python --version
    displayName: "Which Python will be used? Is it even there?"