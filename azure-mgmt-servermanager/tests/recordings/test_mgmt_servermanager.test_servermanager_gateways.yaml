interactions:
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Charset: [utf-8]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      User-Agent: [python-requests/2.11.1]
      client-request-id: [64b93861-08a7-40ec-9f8d-59e71a9e72f6]
      return-client-request-id: ['true']
      x-client-CPU: [x86]
      x-client-OS: [win32]
      x-client-SKU: [Python]
      x-client-Ver: [0.4.3]
    method: GET
    uri: https:/login.microsoftonline.com/common/UserRealm/unittest%40myaddomain.onmicrosoft.com?api-version=1.0
  response:
    body: {string: '{"ver":"1.0","account_type":"Managed","domain_name":"myaddomain.onmicrosoft.com","cloud_instance_name":"microsoftonline.com"}'}
    headers:
      Cache-Control: [private]
      Content-Length: ['131']
      Content-Type: [application/json; charset=utf-8]
      Date: ['Thu, 08 Dec 2016 23:46:57 GMT']
      P3P: [CP="DSP CUR OTPi IND OTRi ONL FIN"]
      Server: [Microsoft-IIS/8.5]
      Set-Cookie: [esctx=AQABAAAAAADRNYRQ3dhRSrm-4K-adpCJv071PxUXsChH64FqvxFHLvpmcUtdq3oFVedvoRSlfm_qiY6SXQkTyS-FR2d37kH8HReKt1bOsgwBpFaBNDR4j8S5-uc_VSEt-ChmUwfAnMGBLwduo356OtX3lKA3DOp5N-ph0c54nD-Y62ozl29KmC3mJtNzaIcicCkM--Wkd64gAA;
          domain=.login.microsoftonline.com; path=/; secure; HttpOnly, x-ms-gateway-slice=corp;
          path=/; secure; HttpOnly, stsservicecookie=ests; path=/; secure; HttpOnly]
      Strict-Transport-Security: [max-age=31536000; includeSubDomains]
      X-Content-Type-Options: [nosniff]
      X-Powered-By: [ASP.NET]
      client-request-id: [64b93861-08a7-40ec-9f8d-59e71a9e72f6]
      x-ms-request-id: [bf6e1785-2cc6-48e5-932d-c408367919cb]
    status: {code: 200, message: OK}
- request:
    body: username=unittest%40myaddomain.onmicrosoft.com&password=R0ckNTe5T%21&scope=openid&client_id=04b07795-8ddb-461a-bbee-02f9e1bf7b46&resource=https%3A%2F%2Fmanagement.core.windows.net%2F&grant_type=password
    headers:
      Accept: ['*/*']
      Accept-Charset: [utf-8]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Length: ['208']
      User-Agent: [python-requests/2.11.1]
      client-request-id: [64b93861-08a7-40ec-9f8d-59e71a9e72f6]
      content-type: [application/x-www-form-urlencoded]
      return-client-request-id: ['true']
      x-client-CPU: [x86]
      x-client-OS: [win32]
      x-client-SKU: [Python]
      x-client-Ver: [0.4.3]
    method: POST
    uri: https:/login.microsoftonline.com/common/oauth2/token?api-version=1.0
  response:
    body: {string: '{"token_type":"Bearer","scope":"user_impersonation","expires_in":"3599","ext_expires_in":"10800","expires_on":"1481244418","not_before":"1481240518","resource":"https://management.core.windows.net/","access_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IlJyUXF1OXJ5ZEJWUldtY29jdVhVYjIwSEdSTSIsImtpZCI6IlJyUXF1OXJ5ZEJWUldtY29jdVhVYjIwSEdSTSJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuY29yZS53aW5kb3dzLm5ldC8iLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC9kNjUwOWUwYy1jYTY0LTRlNWQtYWUyNC05MGE1YjdkMjc5ZTgvIiwiaWF0IjoxNDgxMjQwNTE4LCJuYmYiOjE0ODEyNDA1MTgsImV4cCI6MTQ4MTI0NDQxOCwiYWNyIjoiMSIsImFtciI6WyJwd2QiXSwiYXBwaWQiOiIwNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDYiLCJhcHBpZGFjciI6IjAiLCJlX2V4cCI6MTA4MDAsImZhbWlseV9uYW1lIjoiVGVzdHMiLCJnaXZlbl9uYW1lIjoiVW5pdCIsImdyb3VwcyI6WyIxM2VmMWY2NC01MTU3LTQ4MWMtYjQxYS1hMWNmZjkyNjAxZGIiXSwiaXBhZGRyIjoiMTY3LjIyMC4xLjE3MiIsIm5hbWUiOiJVbml0IFRlc3RzIiwib2lkIjoiZWQ5NWQ2Y2MtNmFkMy00MmJiLTgzNGUtODI2ZDFjN2RiNTQzIiwicGxhdGYiOiIxNCIsInB1aWQiOiIxMDAzMDAwMDk5N0NDQUU1Iiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoiVVdCdWdQb3BZM093Q3B5Vnk1SDU0VkNhZWhvaTVXZGhXckJKVHNQLXRVcyIsInRpZCI6ImQ2NTA5ZTBjLWNhNjQtNGU1ZC1hZTI0LTkwYTViN2QyNzllOCIsInVuaXF1ZV9uYW1lIjoidW5pdHRlc3RAcHR2c2F6dXJlb3V0bG9vay5vbm1pY3Jvc29mdC5jb20iLCJ1cG4iOiJ1bml0dGVzdEBwdHZzYXp1cmVvdXRsb29rLm9ubWljcm9zb2Z0LmNvbSIsInZlciI6IjEuMCIsIndpZHMiOlsiNjJlOTAzOTQtNjlmNS00MjM3LTkxOTAtMDEyMTc3MTQ1ZTEwIl19.O7zQAUdBbEnvl_OIWjcDANQ84ouQA2OyiPZDtYeI7GrtAHIyBoTavyr8Wo8gLP1oDY6p_8G_Ji5M7G6WnTsHIW3sw2tMwg_BvDDzPyJl1GfK0QybQgr9zmTz1I951JWuRJEKmY9Cw_uXX_ZvyjFuPvD_gnn2BPZzUNPqvIXIgmed9eiLLmunGR0tVmqhfl8hkE1grwssIg0xM-tYkScxCSX7JVwDa3GZP-B9bcSCArtjHqfn_Hnxom91BG8oeuHHmvMkfEMwjalnaTUi1R6RRMlAN1auy6ARcOjx617tOqFCpbgDrCkOPkTZm21QEMhaWL1AWNOmQeZf8QTT-t9OSg","refresh_token":"AQABAAAAAADRNYRQ3dhRSrm-4K-adpCJn1VTKgd_bEpfYItSQ7UW66HRvUHseaLDhpMqDi82VVxckoD9jbcC-W-ZGuM-6QmmOpnks6RBbeSgGs_ax_CI6SqY6_wrG69r55erH6RGnZB3NOVGw-GPMGCH2Wem8EIJwHa8st9bzC9-Z5dUnBpQY-lArn6MBveFpVuFmYp00gCJ96OXQacNvyOOt79Nr7Eyr2r64C9OwJCdsyBLoGPmZv2Vvi9iYN04g8hq_qs84QE8Vhr93qnprENvD5bK8v4hK93oRoScWNPWMnFid7JNp0Z88ov_cq7p37RubA8JQoewmpHWFkbb51uDdj52PJY6gnOyfuch8zuq2CtJvPVTA-2L_l_WcYmX9fGw2csYvQKlBzEzXUc2PfGlxgB9wYrEl_Cs0u9-fityxlit3qUmNVwx3pAXJoP-FrSKicdG23L8C8QgFborLDwsET-P0zWZTj-A5PbZnaq8aQON2fdU9hnLrSm_3Ot9zmalRL0UdGWG6yLFQe-V6mVTKFnXINxTMe8p2YK2yEN1W7EAFvzNcLwi6PYuEy2M8o3CZewsGy0L-AD6nurq_ypahIL_2AeuH3nmoMoUTZuScFhmpB_WRcGCZtjQNjPBVu4E4sOjePNZa5oUSpDhxtfWFK729XquIAA","id_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJub25lIn0.eyJhdWQiOiIwNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDYiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC9kNjUwOWUwYy1jYTY0LTRlNWQtYWUyNC05MGE1YjdkMjc5ZTgvIiwiaWF0IjoxNDgxMjQwNTE4LCJuYmYiOjE0ODEyNDA1MTgsImV4cCI6MTQ4MTI0NDQxOCwiYW1yIjpbInB3ZCJdLCJmYW1pbHlfbmFtZSI6IlRlc3RzIiwiZ2l2ZW5fbmFtZSI6IlVuaXQiLCJpcGFkZHIiOiIxNjcuMjIwLjEuMTcyIiwibmFtZSI6IlVuaXQgVGVzdHMiLCJvaWQiOiJlZDk1ZDZjYy02YWQzLTQyYmItODM0ZS04MjZkMWM3ZGI1NDMiLCJwbGF0ZiI6IjE0Iiwic3ViIjoiZFNlSGJCQlhXOHNESEtJRjdVYWRqZjZsWDdFazZaSy1wdGJaQ3VNUHhkayIsInRpZCI6ImQ2NTA5ZTBjLWNhNjQtNGU1ZC1hZTI0LTkwYTViN2QyNzllOCIsInVuaXF1ZV9uYW1lIjoidW5pdHRlc3RAcHR2c2F6dXJlb3V0bG9vay5vbm1pY3Jvc29mdC5jb20iLCJ1cG4iOiJ1bml0dGVzdEBwdHZzYXp1cmVvdXRsb29rLm9ubWljcm9zb2Z0LmNvbSIsInZlciI6IjEuMCJ9."}'}
    headers:
      Cache-Control: ['no-cache, no-store']
      Content-Length: ['3202']
      Content-Type: [application/json; charset=utf-8]
      Date: ['Thu, 08 Dec 2016 23:46:57 GMT']
      Expires: ['-1']
      P3P: [CP="DSP CUR OTPi IND OTRi ONL FIN"]
      Pragma: [no-cache]
      Server: [Microsoft-IIS/8.5]
      Set-Cookie: [esctx=AQABAAAAAADRNYRQ3dhRSrm-4K-adpCJUEVempVGp8y0uABGzCx9IFtp75xBRVQquMSeqy8-H1ZejyMTr8tb4P8w3oSVMSXA6c-1NK_7lm_QRJ62ysGzvPWz7VghplO56svCKKoSUqFfMUPuPk6MsVA-BryWEN9ObjcGDjpuG6xmqHlEXp1pRbmhNfw200Ix1gAG687ezesgAA;
          domain=.login.microsoftonline.com; path=/; secure; HttpOnly, x-ms-gateway-slice=corp;
          path=/; secure; HttpOnly, stsservicecookie=ests; path=/; secure; HttpOnly]
      Strict-Transport-Security: [max-age=31536000; includeSubDomains]
      X-Content-Type-Options: [nosniff]
      X-Powered-By: [ASP.NET]
      client-request-id: [64b93861-08a7-40ec-9f8d-59e71a9e72f6]
      x-ms-request-id: [6c94dc28-6e25-42b9-95d2-5dc6f3cd7950]
    status: {code: 200, message: OK}
- request:
    body: '{"location": "centralus"}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Length: ['25']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.1 (Windows-10-10.0.14393-SP0) requests/2.11.1 msrest/0.4.4
          msrest_azure/0.4.5 servermanagement/1.1.0 Azure-SDK-For-Python]
      accept-language: [en-US]
      x-ms-client-request-id: [9b51508c-bda0-11e6-a665-ecb1d756380e]
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_servermanager_test_servermanager_gateways26e51529/providers/Microsoft.ServerManagement/gateways/pygateway26e51529?api-version=2016-07-01-preview
  response:
    body: {string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/test_mgmt_servermanager_test_servermanager_gateways26e51529/providers/microsoft.servermanagement/gateways/pygateway26e51529","name":"pygateway26e51529","type":"microsoft.servermanagement/gateways","location":"centralus","etag":"W/\"datetime''2016-12-08T23%3A47%3A02.4555328Z''\"","properties":{"created":"2016-12-08T23:46:58.9652921Z","updated":"2016-12-08T23:46:58.9652921Z","autoUpgrade":"On","upgradeMode":"Automatic","desiredVersion":null,"minimumVersion":"1.0.1645.0"}}'}
    headers:
      Cache-Control: [no-cache]
      Content-Type: [application/json; charset=utf-8]
      Date: ['Thu, 08 Dec 2016 23:47:01 GMT']
      Expires: ['-1']
      Pragma: [no-cache]
      Server: [Microsoft-IIS/8.5]
      Strict-Transport-Security: [max-age=31536000; includeSubDomains]
      Transfer-Encoding: [chunked]
      Vary: [Accept-Encoding]
      X-AspNet-Version: [4.0.30319]
      X-Content-Type-Options: [nosniff]
      X-Powered-By: [ASP.NET]
      content-length: ['546']
      x-managementservice-fileversion: [1.0.1884.0]
      x-ms-correlation-request-id: [3843bbf8-cc5d-46ee-98ad-a39d9f16dae9]
      x-ms-ratelimit-remaining-subscription-writes: ['1199']
      x-ms-request-id: [3843bbf8-cc5d-46ee-98ad-a39d9f16dae9]
      x-ms-routing-request-id: ['CENTRALUS:20161208T234702Z:3843bbf8-cc5d-46ee-98ad-a39d9f16dae9']
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.1 (Windows-10-10.0.14393-SP0) requests/2.11.1 msrest/0.4.4
          msrest_azure/0.4.5 servermanagement/1.1.0 Azure-SDK-For-Python]
      accept-language: [en-US]
      x-ms-client-request-id: [9b51508c-bda0-11e6-a665-ecb1d756380e]
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_servermanager_test_servermanager_gateways26e51529/providers/Microsoft.ServerManagement/gateways/pygateway26e51529?api-version=2016-07-01-preview
  response:
    body: {string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/test_mgmt_servermanager_test_servermanager_gateways26e51529/providers/microsoft.servermanagement/gateways/pygateway26e51529","name":"pygateway26e51529","type":"microsoft.servermanagement/gateways","location":"centralus","etag":"W/\"datetime''2016-12-08T23%3A47%3A02.4555328Z''\"","properties":{"created":"2016-12-08T23:46:58.9652921Z","updated":"2016-12-08T23:46:58.9652921Z","autoUpgrade":"On","upgradeMode":"Automatic","desiredVersion":null,"minimumVersion":"1.0.1645.0"}}'}
    headers:
      Cache-Control: [no-cache]
      Content-Type: [application/json; charset=utf-8]
      Date: ['Thu, 08 Dec 2016 23:47:02 GMT']
      Expires: ['-1']
      Pragma: [no-cache]
      Server: [Microsoft-IIS/8.5]
      Strict-Transport-Security: [max-age=31536000; includeSubDomains]
      Transfer-Encoding: [chunked]
      Vary: [Accept-Encoding]
      X-AspNet-Version: [4.0.30319]
      X-Content-Type-Options: [nosniff]
      X-Powered-By: [ASP.NET]
      content-length: ['546']
      x-managementservice-fileversion: [1.0.1884.0]
      x-ms-correlation-request-id: [3d30b3c3-c54a-4ef7-b20d-2eeafbf913ee]
      x-ms-ratelimit-remaining-subscription-reads: ['14993']
      x-ms-request-id: [3d30b3c3-c54a-4ef7-b20d-2eeafbf913ee]
      x-ms-routing-request-id: ['CENTRALUS:20161208T234702Z:3d30b3c3-c54a-4ef7-b20d-2eeafbf913ee']
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.1 (Windows-10-10.0.14393-SP0) requests/2.11.1 msrest/0.4.4
          msrest_azure/0.4.5 servermanagement/1.1.0 Azure-SDK-For-Python]
      accept-language: [en-US]
      x-ms-client-request-id: [9e6a5aca-bda0-11e6-93e6-ecb1d756380e]
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/test_mgmt_servermanager_test_servermanager_gateways26e51529/providers/Microsoft.ServerManagement/gateways/pygateway26e51529?api-version=2016-07-01-preview
  response:
    body: {string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/test_mgmt_servermanager_test_servermanager_gateways26e51529/providers/microsoft.servermanagement/gateways/pygateway26e51529","name":"pygateway26e51529","type":"microsoft.servermanagement/gateways","location":"centralus","etag":"W/\"datetime''2016-12-08T23%3A47%3A02.4555328Z''\"","properties":{"created":"2016-12-08T23:46:58.9652921Z","updated":"2016-12-08T23:46:58.9652921Z","autoUpgrade":"On","upgradeMode":"Automatic","desiredVersion":null,"minimumVersion":"1.0.1645.0"}}'}
    headers:
      Cache-Control: [no-cache]
      Content-Type: [application/json; charset=utf-8]
      Date: ['Thu, 08 Dec 2016 23:47:02 GMT']
      Expires: ['-1']
      Pragma: [no-cache]
      Server: [Microsoft-IIS/8.5]
      Strict-Transport-Security: [max-age=31536000; includeSubDomains]
      Transfer-Encoding: [chunked]
      Vary: [Accept-Encoding]
      X-AspNet-Version: [4.0.30319]
      X-Content-Type-Options: [nosniff]
      X-Powered-By: [ASP.NET]
      content-length: ['546']
      x-managementservice-fileversion: [1.0.1884.0]
      x-ms-correlation-request-id: [fc31613a-9039-4b8f-ad44-5d82018a9787]
      x-ms-ratelimit-remaining-subscription-reads: ['14996']
      x-ms-request-id: [fc31613a-9039-4b8f-ad44-5d82018a9787]
      x-ms-routing-request-id: ['CENTRALUS:20161208T234703Z:fc31613a-9039-4b8f-ad44-5d82018a9787']
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.1 (Windows-10-10.0.14393-SP0) requests/2.11.1 msrest/0.4.4
          msrest_azure/0.4.5 servermanagement/1.1.0 Azure-SDK-For-Python]
      accept-language: [en-US]
      x-ms-client-request-id: [9eba16b8-bda0-11e6-8801-ecb1d756380e]
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ServerManagement/gateways?api-version=2016-07-01-preview
  response:
    body: {string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/test_mgmt_servermanager_test_servermanager_gateways26e51529/providers/microsoft.servermanagement/gateways/pygateway26e51529","name":"pygateway26e51529","type":"microsoft.servermanagement/gateways","location":"centralus","etag":"W/\"datetime''2016-12-08T23%3A47%3A02.4555328Z''\"","properties":{"created":"2016-12-08T23:46:58.9652921Z","updated":"2016-12-08T23:46:58.9652921Z","autoUpgrade":"On","upgradeMode":"Automatic","desiredVersion":null,"minimumVersion":"1.0.1645.0"}}]}'}
    headers:
      Cache-Control: [no-cache]
      Content-Type: [application/json; charset=utf-8]
      Date: ['Thu, 08 Dec 2016 23:47:04 GMT']
      Expires: ['-1']
      Pragma: [no-cache]
      Server: [Microsoft-IIS/8.5]
      Strict-Transport-Security: [max-age=31536000; includeSubDomains]
      Transfer-Encoding: [chunked]
      Vary: [Accept-Encoding]
      X-AspNet-Version: [4.0.30319]
      X-Content-Type-Options: [nosniff]
      X-Powered-By: [ASP.NET]
      content-length: ['558']
      x-managementservice-fileversion: [1.0.1884.0]
      x-ms-correlation-request-id: [65ad5452-64b8-4e1c-bf0b-3d3f2a4354b8]
      x-ms-ratelimit-remaining-subscription-reads: ['14995']
      x-ms-request-id: [65ad5452-64b8-4e1c-bf0b-3d3f2a4354b8]
      x-ms-routing-request-id: ['CENTRALUS:20161208T234705Z:65ad5452-64b8-4e1c-bf0b-3d3f2a4354b8']
    status: {code: 200, message: OK}
version: 1
